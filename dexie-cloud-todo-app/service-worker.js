/*! For license information please see service-worker.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=41)}([function(e,t,n){e.exports=n(21)},function(e,t,n){"use strict";try{self["workbox:core:5.1.4"]&&_()}catch(r){}},function(e,t,n){"use strict";try{self["workbox:precaching:5.1.4"]&&_()}catch(r){}},function(e,t,n){"use strict";try{self["workbox:routing:5.1.4"]&&_()}catch(r){}},function(e,t,n){"use strict";try{self["workbox:strategies:5.1.4"]&&_()}catch(r){}},function(e,t,n){"use strict";try{self["workbox:expiration:5.1.4"]&&_()}catch(r){}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(12);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t,n){(function(e,t){var r=n(9),i=n(18),o=n(0),u=n(22),a=n(23),s=n(24),c=n(28),l=n(29),f=n(30),h=n(34),p=n(35),d=n(36);(function(n,v){"use strict";function y(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var b=y(n),m={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(m),Object.freeze(m.claims)}catch(Ei){}var g={},w=self.document&&navigator.serviceWorker;w&&w.ready.then((function(e){return g.registration=e})),"undefined"!==typeof self&&"clients"in self&&!self.document&&addEventListener("message",(function(e){var t,n;(null===(n=null===(t=e.data)||void 0===t?void 0:t.type)||void 0===n?void 0:n.startsWith("sw-broadcast-"))&&d(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){var n;return t.id!==(null===(n=e.source)||void 0===n?void 0:n.id)&&t.postMessage(e.data)}))}));var _=function(){function e(t){h(this,e),this.name=t}return p(e,[{key:"subscribe",value:function(e){var t=this;if(!w)return function(){};var n=function(n){var r;(null===(r=n.data)||void 0===r?void 0:r.type)==="sw-broadcast-".concat(t.name)&&e(n.data.message)};return w.addEventListener("message",n),function(){return w.removeEventListener("message",n)}}},{key:"postMessage",value:function(e){var t,n=this;"object"===typeof self.clients?d(self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"sw-broadcast-".concat(n.name),message:e})})):g.registration&&(null===(t=g.registration.active)||void 0===t||t.postMessage({type:"sw-broadcast-".concat(this.name),message:e}))}}]),e}(),x=function(e){l(n,e);var t=f(n);function n(e){var r;h(this,n);var i="undefined"===typeof BroadcastChannel?new _(e):new BroadcastChannel(e);return(r=t.call(this,(function(t){function n(e){t.next(e.detail)}function r(e){console.debug("BroadcastedAndLocalEvent: onMessageEvent",e),t.next(e.data)}var o;return self.addEventListener("lbc-".concat(e),n),i instanceof _?o=i.subscribe((function(e){return t.next(e)})):(console.debug("BroadcastedAndLocalEvent: bc.addEventListener()",e,"bc is a",i),i.addEventListener("message",r)),function(){self.removeEventListener("lbc-".concat(e),n),i instanceof _?o():i.removeEventListener("message",r)}}))).name=e,r.bc=i,r}return p(n,[{key:"next",value:function(e){console.debug("BroadcastedAndLocalEvent: bc.postMessage()",c({},e),"bc is a",this.bc),this.bc.postMessage(e);var t=new CustomEvent("lbc-".concat(this.name),{detail:e});self.dispatchEvent(t)}}]),n}(v.Observable),k=new WeakMap,E={realms:"@realmId",members:"@id",roles:"[realmId+name]",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"},S=0;function A(e){"vip"in e&&(e=e.vip);var t=k.get(e.cloud);if(!t){var n=new v.BehaviorSubject({}),r=new x("syncstatechanged-".concat(e.name));n.id=++S;var i=!1;t={get name(){return e.name},close:function(){return e.close()},transaction:e.transaction.bind(e),table:e.table.bind(e),get tables(){return e.tables},cloud:e.cloud,get $jobs(){return e.table("$jobs")},get $syncState(){return e.table("$syncState")},get $baseRevs(){return e.table("$baseRevs")},get $logins(){return e.table("$logins")},get realms(){return e.realms},get members(){return e.members},get roles(){return e.roles},get initiallySynced(){return i},localSyncEvent:n,get syncStateChangedEvent(){return r},dx:e};var o={getCurrentUser:function(){return t.$logins.toArray().then((function(e){return e.find((function(e){return e.isLoggedIn}))||m}))},getPersistedSyncState:function(){return t.$syncState.get("syncState")},getSchema:function(){return t.$syncState.get("schema")},getOptions:function(){return t.$syncState.get("options")},setInitiallySynced:function(e){i=e},reconfigure:function(){r=new x("syncstatechanged-".concat(e.name))}};Object.assign(t,o),k.set(e.cloud,t)}return t}var T=crypto.getRandomValues;function O(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!==typeof t&&"length"in t){!function(e){if(!e)throw new Error("Assertion Failed")}("string"!==typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)O(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var u=t.substr(0,o),a=t.substr(o+1);if(""===a)void 0===n?Array.isArray(e)?isNaN(parseInt(u))||e.splice(parseInt(u),1):delete e[u]:e[u]=n;else{var s=e[u];s||(s=e[u]={}),O(s,a,n)}}else void 0===n?Array.isArray(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}var I="undefined"===typeof self?function(t){var n=e.alloc(t);return T(n),n.toString("base64")}:function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),btoa(String.fromCharCode.apply(null,t))};function P(e){return"string"===typeof e||!!(Array.isArray(e)&&e.some((function(e){return P(e)}))&&e.every(C))}function C(e){return"string"===typeof e||"number"===typeof e||Array.isArray(e)&&e.every(C)}function R(e,t){return!t||"string"===typeof e&&e.startsWith(t)}function j(e,t,n){var r=e[t]||(e[t]={});switch(n.type){case"insert":case"upsert":n.keys.forEach((function(e,t){r[e]={type:"ups",val:n.values[t]}}));break;case"update":case"modify":n.keys.forEach((function(e,t){var i="update"===n.type?n.changeSpecs[t]:n.changeSpec,o=r[e];if(o)switch(o.type){case"ups":for(var u=0,a=Object.entries(i);u<a.length;u++){var c=s(a[u],2),l=c[0],f=c[1];O(o.val,l,f)}break;case"del":break;case"upd":Object.assign(o.mod,i)}else r[e]={type:"upd",mod:i}}));break;case"delete":n.keys.forEach((function(e){r[e]={type:"del"}}))}return e}function N(e,t){var n,r=a(t);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,u=o.table,s=o.muts,c=a(s);try{for(c.s();!(i=c.n()).done;)j(e,u,i.value)}catch(l){c.e(l)}finally{c.f()}}}catch(l){r.e(l)}finally{r.f()}}var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function U(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function B(e){return"function"===typeof e}var L=!1,K={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,L=e},get useDeprecatedSynchronousErrorHandling(){return L}};function M(e){setTimeout((function(){throw e}),0)}var F={closed:!0,next:function(e){},error:function(e){if(K.useDeprecatedSynchronousErrorHandling)throw e;M(e)},complete:function(){}},q=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}();function W(e){return null!==e&&"object"===typeof e}var Y=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),V=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,u=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a)r[a].remove(this);if(B(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(ri){t=ri instanceof Y?H(ri.errors):[ri]}}if(q(u)){a=-1;for(var s=u.length;++a<s;){var c=u[a];if(W(c))try{c.unsubscribe()}catch(ri){t=t||[],ri instanceof Y?t=t.concat(H(ri.errors)):t.push(ri)}}}if(t)throw new Y(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function H(e){return e.reduce((function(e,t){return e.concat(t instanceof Y?t.errors:t)}),[])}var $=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),z=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=F;break;case 1:if(!n){o.destination=F;break}if("object"===typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new G(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new G(o,n,r,i)}return o}return U(t,e),t.prototype[$]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(V),G=function(e){function t(t,n,r,i){var o,u=e.call(this)||this;u._parentSubscriber=t;var a=u;return B(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==F&&(B((a=Object.create(n)).unsubscribe)&&u.add(a.unsubscribe.bind(a)),a.unsubscribe=u.unsubscribe.bind(u))),u._context=a,u._next=o,u._error=r,u._complete=i,u}return U(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;K.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=K.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):M(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;M(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};K.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),K.useDeprecatedSynchronousErrorHandling)throw n;M(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!K.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return K.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(M(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(z),J=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function Q(e){return e}function X(e){return 0===e.length?Q:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Z=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof z)return e;if(e[$])return e[$]()}return e||t||n?new z(e,t,n):new z(F)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||K.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),K.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){K.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof z?r:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ee(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[J]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:X(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ee(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function ee(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}var te=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function ne(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var re=ne(),ie=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function oe(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}var ue=function(e){if(e&&"function"===typeof e[J])return r=e,function(e){var t=r[J]();if("function"!==typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(ie(e))return te(e);if(oe(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,M),e};if(e&&"function"===typeof e[re])return t=e,function(e){for(var n=t[re]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"===typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=W(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},ae=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return U(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(z),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return U(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(z);function ce(e,t){if(!t.closed)return e instanceof Z?e.subscribe(t):ue(e)(t)}var le=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return U(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(ri){n=!0,r=!!ri&&ri||new Error(ri)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return U(t,e),t.prototype.schedule=function(e,t){return this},t}(V)),fe=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),he=new(function(e){function t(n,r){void 0===r&&(r=fe.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return U(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(fe))(le);function pe(e){return e&&"function"===typeof e.schedule}var de=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new ve(e,this.selector,this.caught))},e}(),ve=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return U(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(o){return void e.prototype.error.call(this,o)}this._unsubscribeAndRecycle();var r=new ae(this);this.add(r);var i=ce(n,r);i!==r&&this.add(i)}},t}(se);function ye(e,t){return new Z((function(n){var r=new V,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function be(e,t){return t?ye(e,t):new Z(te(e))}function me(e,t){if(null!=e){if(function(e){return e&&"function"===typeof e[J]}(e))return function(e,t){return new Z((function(n){var r=new V;return r.add(t.schedule((function(){var i=e[J]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(oe(e))return function(e,t){return new Z((function(n){var r=new V;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(ie(e))return ye(e,t);if(function(e){return e&&"function"===typeof e[re]}(e)||"string"===typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new Z((function(n){var r,i=new V;return i.add((function(){r&&"function"===typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[re](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ge(e,t){return t?me(e,t):e instanceof Z?e:new Z(ue(e))}function we(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return pe(n)?(e.pop(),ye(e,n)):be(e)}function _e(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new xe(e,t))}}var xe=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ke(e,this.project,this.thisArg))},e}(),ke=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return U(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(z);function Ee(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?function(r){return r.pipe(Ee((function(n,r){return ge(e(n,r)).pipe(_e((function(e,i){return t(n,e,r,i)})))}),n))}:("number"===typeof t&&(n=t),function(t){return t.lift(new Se(e,n))})}var Se=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Ae(e,this.project,this.concurrent))},e}(),Ae=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return U(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new ae(this),n=this.destination;n.add(t);var r=ce(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(se);function Te(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ee(Q,e)}function Oe(){return Te(1)}function Ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Oe()(we.apply(void 0,e))}var Pe=new Z((function(e){return e.complete()}));function Ce(e){return e?function(e){return new Z((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Pe}function Re(e){var t=e.error;e.subscriber.error(t)}var je=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function Ne(e,t){return function(n){return n.lift(new De(e,t))}}var De=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ue(e,this.predicate,this.thisArg))},e}(),Ue=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return U(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(z);function Be(e){return function(t){return 0===e?Ce():t.lift(new Le(e))}}var Le=function(){function e(e){if(this.total=e,this.total<0)throw new je}return e.prototype.call=function(e,t){return t.subscribe(new Ke(e,this.total))},e}(),Ke=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return U(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(z);function Me(e,t){return"function"===typeof t?function(n){return n.pipe(Me((function(n,r){return ge(e(n,r)).pipe(_e((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Fe(e))}}var Fe=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new qe(e,this.project))},e}(),qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return U(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new ae(this),r=this.destination;r.add(n),this.innerSubscription=ce(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(se),We=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function Ye(e,t,n){return void 0===n&&(n=he),function(r){var i,o=(i=e)instanceof Date&&!isNaN(+i),u=o?+e-n.now():Math.abs(e);return r.lift(new Ve(u,o,t,n))}}var Ve=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new He(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),He=function(e){function t(t,n,r,i,o){var u=e.call(this,t)||this;return u.absoluteTimeout=n,u.waitFor=r,u.withObservable=i,u.scheduler=o,u.scheduleTimeout(),u}return U(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(ce(t,new ae(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(se);function $e(e,t){return void 0===t&&(t=he),Ye(e,function(e,t){return new Z(t?function(n){return t.schedule(Re,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}(new We),t)}var ze="undefined"!==typeof e?function(t){return e.from(t,"base64")}:function(e){for(var t=atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r},Ge="undefined"!==typeof e?function(t){return ArrayBuffer.isView(t)?e.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"):e.from(t).toString("base64")}:function(e){return btoa(String.fromCharCode.apply(null,e))};function Je(e,t){return new Promise((function(n,r){var i=c(c({},t),{},{onSubmit:function(t){e.next(void 0),n(t)},onCancel:function(){e.next(void 0),r(new b.default.AbortError("User cancelled"))}});e.next(i)}))}function Qe(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Je(e,{type:"message-alert",title:t,alerts:r,fields:{}})}function Xe(e,t,n){return Ze.apply(this,arguments)}function Ze(){return(Ze=u(o.mark((function e(t,n,r){var i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r||"";case 1:if(i&&/^[\w-\.]+@([\w-]+\.)+[\w-]{2,10}$/.test(i)){e.next=7;break}return e.next=4,Je(t,{type:"email",title:n,alerts:i?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}});case 4:i=e.sent.email,e.next=1;break;case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=u(o.mark((function e(t,n,r){var i,u,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:n}}],r&&i.push(r),e.next=4,Je(t,{type:"otp",title:"Enter OTP",alerts:i,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});case 4:return u=e.sent,a=u.otp,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=u(o.mark((function e(t){var n,r,i,u,a,s,c,l,f;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCurrentUser();case 2:if(i=e.sent,u=i.accessToken,a=i.accessTokenExpiration,s=i.refreshToken,c=i.refreshTokenExpiration,l=i.claims,u){e.next=6;break}return e.abrupt("return");case 6:if(!((null!==(n=null===a||void 0===a?void 0:a.getTime())&&void 0!==n?n:1/0)>Date.now())){e.next=9;break}return e.abrupt("return",u);case 9:if(s){e.next=11;break}throw new Error("Refresh token missing");case 11:if(!((null!==(r=null===c||void 0===c?void 0:c.getTime())&&void 0!==r?r:1/0)<=Date.now())){e.next=14;break}throw new Error("Refresh token has expired");case 14:return e.next=16,ut(t.cloud.options.databaseUrl,i);case 16:return f=e.sent,e.next=19,t.table("$logins").update(l.sub,{accessToken:f.accessToken,accessTokenExpiration:f.accessTokenExpiration});case 19:return e.abrupt("return",f.accessToken);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n,r,i){return ot.apply(this,arguments)}function ot(){return(ot=u(o.mark((function e(t,n,r,i,u){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.accessToken&&n.accessTokenExpiration.getTime()>Date.now())){e.next=4;break}return e.abrupt("return",n);case 4:if(!n.refreshToken||n.refreshTokenExpiration&&!(n.refreshTokenExpiration.getTime()>Date.now())){e.next=10;break}return e.next=7,ut(t,n);case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,st(n,r,i,u);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t){return at.apply(this,arguments)}function at(){return(at=u(o.mark((function e(t,n){var r,i,u,a,s,c,l,f,h;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.refreshToken){e.next=2;break}throw new Error("Cannot refresh token - refresh token is missing.");case 2:if(n.nonExportablePrivateKey){e.next=4;break}throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");case 4:return r=Date.now(),i="RSASSA-PKCS1-v1_5",u=new TextEncoder,a=u.encode(n.refreshToken+r),e.next=10,crypto.subtle.sign(i,n.nonExportablePrivateKey,a);case 10:return s=e.sent,c=Ge(s),l={grant_type:"refresh_token",refresh_token:n.refreshToken,scopes:["ACCESS_DB"],signature:c,signing_algorithm:i,time_stamp:r},e.next=15,fetch("".concat(t,"/token"),{body:JSON.stringify(l),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});case 15:if(200===(f=e.sent).status){e.next=18;break}throw new Error("RefreshToken: Status ".concat(f.status," from ").concat(t,"/token"));case 18:return e.next=20,f.json();case 20:return h=e.sent,n.accessToken=h.accessToken,n.accessTokenExpiration=h.accessTokenExpiration?new Date(h.accessTokenExpiration):void 0,e.abrupt("return",n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t,n,r){return ct.apply(this,arguments)}function ct(){return(ct=u(o.mark((function e(t,n,r,i){var u,a,s,c,l,f;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);case 2:return u=e.sent,a=u.privateKey,s=u.publicKey,t.nonExportablePrivateKey=a,e.next=8,crypto.subtle.exportKey("spki",s);case 8:return c=e.sent,l=lt(c),t.publicKey=s,e.prev=11,e.next=14,n({public_key:l,hints:i});case 14:if("tokens"===(f=e.sent).type){e.next=17;break}throw new Error("Unexpected response type from token endpoint: ".concat(f.type));case 17:if(t.accessToken=f.accessToken,t.accessTokenExpiration=new Date(f.accessTokenExpiration),t.refreshToken=f.refreshToken,f.refreshTokenExpiration&&(t.refreshTokenExpiration=new Date(f.refreshTokenExpiration)),t.userId=f.claims.sub,t.email=f.claims.email,t.name=f.claims.name,t.claims=f.claims,!(f.alerts&&f.alerts.length>0)){e.next=28;break}return e.next=28,Je(r,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:f.alerts});case 28:return e.abrupt("return",t);case 31:return e.prev=31,e.t0=e.catch(11),e.next=35,Qe(r,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:"We're having a problem to authenticate rigth now.",messageParams:{}}).catch((function(){}));case 35:throw e.t0;case 36:case"end":return e.stop()}}),e,null,[[11,31]])})))).apply(this,arguments)}function lt(e){return function(e){for(var t="-----BEGIN PUBLIC KEY-----\n";e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return t+="-----END PUBLIC KEY-----"}(Ge(e))}var ft=new WeakMap,ht=function(){function e(t,n){h(this,e),ft.set(this,t),Object.assign(this,n)}return p(e,[{key:"save",value:function(){var e=u(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ft.get(this).table("$logins").put(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"load",value:function(t,n){return t.table("$logins").get(n).then((function(r){return new e(t,r||{userId:n,claims:{sub:n},lastLogin:new Date(0)})}))}}]),e}(),pt=function(e){l(n,e);var t=f(n);function n(e,r){var i;return h(this,n),(i=t.call(this,r||"".concat(e.status," ").concat(e.statusText))).httpStatus=e.status,i}return p(n,[{key:"name",get:function(){return"HttpError"}}]),n}(i(Error));function dt(e){var t=e.cloud.userInteraction;return function(){var n=u(o.mark((function n(r){var i,u,a,s,c,l,f,h,p,d,v,y,b,m,g;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.public_key,u=r.hints,c=null===(a=e.cloud.options)||void 0===a?void 0:a.databaseUrl){n.next=4;break}throw new Error("No database URL given.");case 4:if("demo"!==(null===u||void 0===u?void 0:u.grant_type)){n.next=11;break}return n.next=7,Xe(t,"Enter a demo user email",(null===u||void 0===u?void 0:u.email)||(null===u||void 0===u?void 0:u.userId));case 7:l=n.sent,s={demo_user:l,grant_type:"demo",scopes:["ACCESS_DB"],public_key:i},n.next=15;break;case 11:return n.next=13,Xe(t,"Enter email address",null===u||void 0===u?void 0:u.email);case 13:f=n.sent,s={email:f,grant_type:"otp",scopes:["ACCESS_DB"],public_key:i};case 15:return n.next=17,fetch("".concat(c,"/token"),{body:JSON.stringify(s),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});case 17:if(200===(h=n.sent).status){n.next=25;break}return n.next=21,h.text();case 21:return p=n.sent,n.next=24,Qe(t,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:p,messageParams:{}}).catch((function(){}));case 24:throw new pt(h,p);case 25:return n.next=27,h.json();case 27:if("tokens"!==(d=n.sent).type){n.next=32;break}return n.abrupt("return",d);case 32:if("otp"!==s.grant_type){n.next=68;break}if("otp-sent"===d.type){n.next=35;break}throw new Error("Unexpected response from ".concat(c,"/token"));case 35:return n.next=37,et(t,s.email);case 37:return v=n.sent,s.otp=v||"",s.otp_id=d.otp_id,n.next=42,fetch("".concat(c,"/token"),{body:JSON.stringify(s),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});case 42:y=n.sent;case 43:if(401!==y.status){n.next=55;break}return n.next=46,y.text();case 46:return b=n.sent,n.next=49,et(t,s.email,{type:"error",messageCode:"INVALID_OTP",message:b,messageParams:{}});case 49:return s.otp=n.sent,n.next=52,fetch("".concat(c,"/token"),{body:JSON.stringify(s),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});case 52:y=n.sent,n.next=43;break;case 55:if(200===y.status){n.next=62;break}return n.next=58,y.text();case 58:return m=n.sent,n.next=61,Qe(t,"OTP Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:m,messageParams:{}}).catch((function(){}));case 61:throw new pt(y,m);case 62:return n.next=64,y.json();case 64:return g=n.sent,n.abrupt("return",g);case 68:throw new Error("Unexpected response from ".concat(c,"/token"));case 69:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function vt(e,t){return yt.apply(this,arguments)}function yt(){return(yt=u(o.mark((function e(t,n){var r;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.userId!==t.cloud.currentUserId){e.next=2;break}return e.abrupt("return");case 2:return r=t.table("$logins"),e.next=5,t.transaction("rw",r,function(){var e=u(o.mark((function e(t){var i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.toArray();case 2:return i=e.sent,e.next=5,Promise.all(i.filter((function(e){return e.userId!==n.userId&&e.isLoggedIn})).map((function(e){return e.isLoggedIn=!1,r.put(e)})));case 5:return n.isLoggedIn=!0,n.lastLogin=new Date,e.next=9,n.save();case 9:console.debug("Saved new user",n.email);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.next=7,new Promise((function(e){if(t.cloud.currentUserId===n.userId)e(null);else var r=t.cloud.currentUser.subscribe((function(t){t.userId===n.userId&&(r.unsubscribe(),e(null))}))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e,t){return mt.apply(this,arguments)}function mt(){return(mt=u(o.mark((function e(t,n){var r;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cloud.currentUser.value.isLoggedIn){e.next=7;break}if(!n){e.next=6;break}if(!n.email||t.cloud.currentUser.value.email===n.email){e.next=4;break}throw new Error("Must logout before changing user");case 4:if(!n.userId||t.cloud.currentUserId===n.userId){e.next=6;break}throw new Error("Must logout before changing user");case 6:return e.abrupt("return");case 7:return r=new ht(t,{claims:{},lastLogin:new Date(0)}),e.next=10,it(t.cloud.options.databaseUrl,r,t.cloud.options.fetchTokens||dt(t),t.cloud.userInteraction,n);case 10:return e.next=12,r.save();case 12:return e.next=14,vt(t,r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gt="undefined"!==typeof navigator&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),wt=gt?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,_t=gt&&wt<=605,xt="undefined"!==typeof self&&"clients"in self&&!self.document;function kt(){throw new b.default.SchemaError("Version increment needed to allow dexie-cloud change tracking")}function Et(e){return function(e){for(var t="",n=0,r=e.length;n<r;n++)t+=Tt[e[n]];return t}(Ge(e))}function St(e){return ze(function(e){if("string"!==typeof e)throw new Error("invalid decoder input: "+e);for(var t="",n=0,r=e.length;n<r;n++)t+=At[e[n]];return t}(e))}for(var At={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},Tt={},Ot=0,It=Object.keys(At);Ot<It.length;Ot++){var Pt=It[Ot];Tt[At[Pt]]=Pt}var Ct={}.toString;function Rt(e){return Ct.call(e).slice(8,-1)}function jt(e,t){var n;return"delete"===t.type?t.keys:(null===(n=t.keys)||void 0===n?void 0:n.slice())||t.values.map(e.extractKey)}var Nt=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i,Dt=0;function Ut(e){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:function(t){return c(c({},t),{},{table:function(n){var r=t.table(n);function i(t,i){var o=null,u=jt(r.schema.primaryKey,t);return u.forEach((function(a,s){if(void 0===a){var c=t.values[s].realmId||e.cloud.currentUserId,l=c.substr(c.length-3);u[s]=function(e,t){var n=new Uint8Array(18),r=new Uint8Array(n.buffer,0,6),i=Date.now();Dt>=i?++Dt:Dt=i,r[0]=Dt/1099511627776,r[1]=Dt/4294967296,r[2]=Dt/16777216,r[3]=Dt/65536,r[4]=Dt/256,r[5]=Dt;var o=new Uint8Array(n.buffer,6);return crypto.getRandomValues(o),e+Et(new Uint8Array(n.buffer))+(t||"")}(i,l),r.schema.primaryKey.outbound||(o||(o=t.values.slice()),o[s]=b.default.deepClone(o[s]),b.default.setByKeyPath(o[s],r.schema.primaryKey.keyPath,u[s]))}else if("string"!==typeof a||!a.startsWith(i))throw new b.default.ConstraintError('The ID "'.concat(a,'" is not valid for table "').concat(n,'". ')+"Primary '@' keys requires the key to be prefixed with \"".concat(i,'.\n"')+"If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.")})),r.mutate(c(c({},t),{},{keys:u,values:o||t.values}))}return c(c({},r),{},{mutate:function(t){var o,u;if(t.trans.disableChangeTracking)return r.mutate(t);if("add"===t.type||"put"===t.type){var a=null===(o=e.cloud.schema)||void 0===o?void 0:o[n];if(null===a||void 0===a?void 0:a.generatedGlobalId){if((null===(u=e.cloud.options)||void 0===u?void 0:u.databaseUrl)&&!e.initiallySynced){var s=jt(r.schema.primaryKey,t);return r.getMany({keys:s,trans:t.trans,cache:"immutable"}).then((function(e){if(e.length<s.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return r.mutate(t)}))}return i(t,a.idPrefix)}(null===a||void 0===a?void 0:a.markedForSync)&&jt(r.schema.primaryKey,t).forEach((function(e,t){if(!P(e)){var r=Array.isArray(e)?e.map(Rt).join(","):Rt(e);throw new b.default.ConstraintError("Invalid primary key type ".concat(r," for table ").concat(n,". Tables marked for sync has primary keys of type string or Array of string (and optional numbers)"))}}))}return r.mutate(t)}})}})}}}function Bt(e){return"$".concat(e,"_mutations")}function Lt(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),btoa(String.fromCharCode.apply(null,t))}var Kt=0;function Mt(e,t){return function(n){var r=n.trans[t]||(n.trans[t]={writers:[],readers:[]}),i=r.readers,o=r.writers,u=o.length,a=(u>0?o[u-1].finally((function(){return e(n)})):e(n)).finally((function(){return i.splice(i.indexOf(a))}));return i.push(a),a}}function Ft(e,t){return function(n){var r,i=n.trans[t]||(n.trans[t]={writers:[],readers:[]}),o=i.readers,u=i.writers,a=(u.length>0?u[u.length-1].finally((function(){return e(n)})):o.length>0?(r=o,new Promise((function(e){0===r.length&&e([]);var t=r.length,n=new Array(t);r.forEach((function(r,i){return Promise.resolve(r).then((function(e){return n[i]={status:"fulfilled",value:e}}),(function(e){return n[i]={status:"rejected",reason:e}})).then((function(){return--t||e(n)}))}))}))).then((function(){return e(n)})):e(n)).finally((function(){return u.shift()}));return u.push(a),a}}var qt=!1;function Wt(e){return Yt.apply(this,arguments)}function Yt(){return(Yt=u(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.ready;case 3:if(!(n=e.sent).sync){e.next=9;break}return e.next=7,n.sync.register("dexie-cloud:".concat(t.name));case 7:e.next=10;break;case 9:n.active?n.active.postMessage({type:"dexie-cloud-sync",dbName:t.name}):console.error("Dexie Cloud: There's no active service worker. Can this ever happen??");case 10:return e.abrupt("return");case 13:e.prev=13,e.t0=e.catch(0),qt||(console.debug("Dexie Cloud: Could not register sync event",e.t0),qt=!0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function Vt(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=u(o.mark((function e(t){var n,r,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.ready;case 3:if(r=e.sent,!(i=r.periodicSync)){e.next=17;break}return e.prev=6,e.next=9,i.register("dexie-cloud:".concat(t.name),null===(n=t.cloud.options)||void 0===n?void 0:n.periodicSync);case 9:console.debug("Dexie Cloud: Successfully registered periodicsync event for ".concat(t.name)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.debug("Dexie Cloud: Failed to register periodic sync. Your PWA must be installed to allow background sync.",e.t0);case 15:e.next=18;break;case 17:console.debug("Dexie Cloud: periodicSync not supported.");case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),console.debug("Dexie Cloud: Could not register periodicSync for ".concat(t.name),e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,20],[6,12]])})))).apply(this,arguments)}var $t=new v.BehaviorSubject(new Set);function zt(e){var t=e.currentUserObservable,n=e.db;return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:function(e){var r,i=e.schema.tables.filter((function(e){return!/^\$/.test(e.name)}));try{r=new Map(i.map((function(t){return[t.name,e.table("$".concat(t.name,"_mutations"))]})))}catch(Ei){kt()}return c(c({},e),{},{transaction:function(r,i){var o;if("readwrite"===i){var u=r.filter((function(e){var t,r;return null===(r=null===(t=n.cloud.schema)||void 0===t?void 0:t[e])||void 0===r?void 0:r.markedForSync})).map((function(e){return Bt(e)}));o=e.transaction([].concat(d(r),d(u)),i)}else o=e.transaction(r,i);if("readwrite"===i){o.txid=Lt(16),o.currentUser=t.value,$t.value.add(o),$t.next($t.value);var a=function e(){o.removeEventListener("complete",s),o.removeEventListener("error",e),o.removeEventListener("abort",e),$t.value.delete(o),$t.next($t.value)},s=function(){var e;o.mutationsAdded&&(null===(e=n.cloud.options)||void 0===e?void 0:e.databaseUrl)&&(n.cloud.usingServiceWorker?(console.debug("registering sync event"),Wt(n)):n.localSyncEvent.next({})),a()};o.addEventListener("complete",s),o.addEventListener("error",a),o.addEventListener("abort",a)}return o},table:function(t){var n=e.table(t);if(/^\$/.test(t))return t.endsWith("_mutations")?c(c({},n),{},{mutate:function(e){return"add"!==e.type&&"put"!==e.type||(e.trans.mutationsAdded=!0),n.mutate(e)}}):"$logins"===t?c(c({},n),{},{mutate:function(e){return console.debug("Mutating $logins table",e),n.mutate(e).then((function(t){return console.debug("Mutating $logins"),e.trans.mutationsAdded=!0,console.debug("$logins mutated"),t})).catch((function(e){return console.debug("Failed mutation $logins",e),Promise.reject(e)}))}}):n;var i=n.schema,o=r.get(t);return function(e){var t="$lock"+ ++Kt;return c(c({},e),{},{count:Mt(e.count,t),get:Mt(e.get,t),getMany:Mt(e.getMany,t),openCursor:Mt(e.openCursor,t),query:Mt(e.query,t),mutate:Ft(e.mutate,t)})}(c(c({},n),{},{mutate:function(e){var t,r=e.trans;return r.txid?r.disableChangeTracking?n.mutate(e):(null===(t=r.currentUser)||void 0===t?void 0:t.isLoggedIn)?"deleteRange"===e.type?n.query({query:{range:e.range,index:i.primaryKey},trans:e.trans,values:!1}).then((function(t){return u({type:"delete",keys:t.result,trans:e.trans,criteria:{index:null,range:e.range}})})):u(e):n.mutate(e):n.mutate(e)}}));function u(e){var t=e.trans;t.mutationsAdded=!0;var r=t.txid,i=t.currentUser.userId,u=e.type;return n.mutate(e).then((function(n){var a=n.numFailures,s=n.failures,c="delete"===u?e.keys:n.results,l="values"in e?e.values:[],f="changeSpecs"in e?e.changeSpecs:[];a&&(c=c.filter((function(e,t){return!s[t]})),l=l.filter((function(e,t){return!s[t]})),f=f.filter((function(e,t){return!s[t]})));var h=Date.now(),p="delete"===e.type?{type:"delete",ts:h,keys:c,criteria:e.criteria,txid:r,userId:i}:"add"===e.type?{type:"insert",ts:h,keys:c,txid:r,userId:i,values:l}:e.criteria&&e.changeSpec?{type:"modify",ts:h,keys:c,criteria:e.criteria,changeSpec:e.changeSpec,txid:r,userId:i}:e.changeSpecs?{type:"update",ts:h,keys:c,changeSpecs:f,txid:r,userId:i}:{type:"upsert",ts:h,keys:c,values:l,txid:r,userId:i};return c.length>0||"criteria"in e&&e.criteria?o.mutate({type:"add",trans:t,values:[p]}).then((function(){return n})):n}))}}})}}}function Gt(e,t){return function(n,r){var i=c(c({},E),n),o=t.cloud.schema||(t.cloud.schema={}),u=new Set;return Object.keys(i).forEach((function(e){var t=i[e],n=o[e]||(o[e]={});null!=t?(/^\@/.test(t)&&(i[e]=i[e].substr(1),n.generatedGlobalId=!0,n.idPrefix=function(e,t){for(var n,r,i,o=e[0].toLocaleLowerCase(),u=1,a=e.length;u<a&&o.length<3;++u)(Nt.test(e[u])||(n=e[u])>="A"&&n<="Z")&&(o+=e[u].toLowerCase());for(;t.has(o);){if(/\d/g.test(o)){if(!((o=o.substr(0,o.length-1)+(o[o.length-1]+1)).length>3))continue;o=o.substr(0,3)}else if(o.length<3){o+="2";continue}for(var s=1,c=o;t.has(c)&&s<8;)r=o,c=(1&(i=s)?r[0].toUpperCase():r[0].toLowerCase())+(2&i?r[1].toUpperCase():r[1].toLowerCase())+(4&i?r[2].toUpperCase():r[2].toLowerCase()),++s;if(s<8)o=c;else{var l=o.charCodeAt(2)+1&127;o=o.substr(0,2)+String.fromCharCode(l)}}return o}(e,u),u.add(n.idPrefix)),/^\$/.test(e)||(i["$".concat(e,"_mutations")]="++rev",n.markedForSync=!0),n.deleted&&(n.deleted=!1)):(n.deleted=!0,n.markedForSync=!1,i["$".concat(e,"_mutations")]=null)})),e.call(this,i,r)}}var Jt=6e4,Qt=Lt(16),Xt=1e3,Zt=6e4;function en(e,t,n,r){return tn.apply(this,arguments)}function tn(){return(tn=u(o.mark((function e(t,r,i,a){var s,c,l,f,h,p,d=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(){return(h=u(o.mark((function e(){var a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.transaction("rw!",i,u(o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get(r);case 2:if(t=e.sent){e.next=9;break}return e.next=6,l.add({nodeId:Qt,started:new Date,heartbeat:new Date},r);case 6:return e.abrupt("return",!0);case 9:if(!(t.heartbeat.getTime()<Date.now()-Zt)){e.next=14;break}return console.warn("Latest ".concat(r," worker seem to have died.\n"),"The dead job started:",t.started,"\n","Last heart beat was:",t.heartbeat,"\n","We're now taking over!"),e.next=13,l.put({nodeId:Qt,started:new Date,heartbeat:new Date},r);case 13:return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)}))));case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",!0);case 5:if(!c){e.next=20;break}return e.prev=6,a=v.from(n.liveQuery((function(){return l.get(r)}))).pipe($e(Zt),Ne((function(e){return!e}))),e.next=10,a.toPromise();case 10:return e.abrupt("return",!1);case 13:if(e.prev=13,e.t0=e.catch(6),"TimeoutError"===e.t0.name){e.next=17;break}throw e.t0;case 17:return e.next=19,f();case 19:return e.abrupt("return",e.sent);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)},f=function(){return h.apply(this,arguments)},s=d.length>4&&void 0!==d[4]?d[4]:{},c=s.awaitRemoteJob,l=t.table(i),e.next=6,f();case 6:if(!e.sent){e.next=17;break}return p=setInterval((function(){l.update(r,(function(e){return e.nodeId===Qt&&(e.heartbeat=new Date)}))}),Xt),e.prev=8,e.next=11,a();case 11:return e.abrupt("return",e.sent);case 12:return e.prev=12,clearInterval(p),e.next=16,t.transaction("rw!",i,u(o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get(r);case 2:(t=e.sent)&&t.nodeId===Qt&&l.delete(r);case 4:case"end":return e.stop()}}),e)}))));case 16:return e.finish(12);case 17:case"end":return e.stop()}}),e,null,[[8,,12,17]])})))).apply(this,arguments)}function nn(e){return Object.entries(e.cloud.schema||{}).filter((function(e){return s(e,2)[1].markedForSync})).map((function(t){var n=s(t,1)[0];return e.table(n)}))}function rn(e,t,n,r){return on.apply(this,arguments)}function on(){return(on=u(o.mark((function e(t,n,r,i){var a,s;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isLoggedIn){e.next=7;break}if(!(t.length>0)){e.next=7;break}return a=new Set(i||[]),e.next=5,Promise.all(t.map(function(){var e=u(o.mark((function e(t){var i,u,s,c,l;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.core.schema.primaryKey.extractKey){e.next=3;break}return e.abrupt("return",{table:t.name,muts:[]});case 3:return u=r[t.name],s=(null===u||void 0===u?void 0:u.generatedGlobalId)?t.filter((function(e){return!a.has(e.realmId||"")&&P(i(e))})):t.filter((function(e){return!a.has(e.realmId||"")&&R(i(e),null===u||void 0===u?void 0:u.idPrefix)})),e.next=7,s.toArray();case 7:if(!((c=e.sent).length>0)){e.next=13;break}return l={type:"insert",values:c,keys:c.map(i),userId:n.userId},e.abrupt("return",{table:t.name,muts:[l]});case 13:return e.abrupt("return",{table:t.name,muts:[]});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return s=e.sent,e.abrupt("return",s.filter((function(e){return e.muts.length>0})));case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function un(e,t){var n=(null===t||void 0===t?void 0:t.syncedTables)||[];return nn(e).filter((function(e){return!n.includes(e.name)}))}function an(e){var t,n=null===(t=/^\$(.*)_mutations$/.exec(e))||void 0===t?void 0:t[1];if(!n)throw new Error("Given mutationTable ".concat(e," is not correct"));return n}function sn(e,t){return cn.apply(this,arguments)}function cn(){return(cn=u(o.mark((function e(t,n){var r,i,a,s,c,l,f=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:{},i=r.since,a=void 0===i?{}:i,s=r.limit,c=void 0===s?1/0:s,e.next=3,Promise.all(t.map(function(){var e=u(o.mark((function e(t){var n,r,i,u;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=an(t.name),r=a[n],i=r?t.where("rev").above(r):t,c<1/0&&(i=i.limit(c)),e.next=6,i.toArray();case 6:return u=e.sent,e.abrupt("return",{table:n,muts:u});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return l=e.sent,e.abrupt("return",l.filter((function(e){return e.muts.length>0})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ln={}.toString;function fn(e){return ln.call(e).slice(8,-1)}var hn={replace:function(e){for(var t=Object.keys(e),n=null,r=0,i=t.length;r<i;++r)"$"===t[r][0]&&(n=n||[]).push(t[r]);if(!n)return e;var o,u=c({},e),s=a(n);try{for(s.s();!(o=s.n()).done;){var l=o.value;delete u[l],u["$"+l]=e[l]}}catch(f){s.e(f)}finally{s.f()}return u}};function pn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return c(c({},e),t)}),t.reduce((function(e,t){return c(c({},t),e)}),{})),i=new WeakMap;return{stringify:function(e,t,n){return JSON.stringify(e,(function(e){var n=this[e],i=o(n);return i?i.replace(n,t,r):n}),n)},parse:function(e,t){var n=null,i=[];return JSON.parse(e,(function(e,o){var u=null===o||void 0===o?void 0:o.$t;if(u){var s=r[u];o=s?s.revive(o,t,r):o}if(o===n){if(i.length>0){o=c({},o);var l,f=a(i);try{for(f.s();!(l=f.n()).done;){var h=l.value;o[h.substr(1)]=o[h],delete o[h]}}catch(p){f.e(p)}finally{f.f()}}return i=[],o}return"$"===e[0]&&"$t"!==e&&(n=this,i.push(e)),o}))}};function o(e){var t=typeof e;switch(typeof e){case"object":case"function":if(null===e)return null;var n=Object.getPrototypeOf(e);if(!n)return hn;var o=i.get(n);if(void 0!==o)return o;var u=fn(e),a=Object.entries(r).find((function(t){var n,r,i=s(t,2),o=i[0],a=i[1];return null!==(r=null===(n=null===a||void 0===a?void 0:a.test)||void 0===n?void 0:n.call(a,e,u))&&void 0!==r?r:o===u}));return(o=null===a||void 0===a?void 0:a[1])||(o=Array.isArray(e)?null:"function"===typeof e?r.function||null:hn),i.set(n,o),o;default:return r[t]}}}var dn={Blob:{test:function(e,t){return"Blob"===t},replace:function(e,t){var n=t.length;return t.push(e),{$t:"Blob",mimeType:e.type,i:n}},revive:function(e,t){var n=e.i,r=e.mimeType;return new Blob([t[n]],{type:r})}}},vn={number:{replace:function(e){switch(!0){case isNaN(e):return{$t:"number",v:"NaN"};case e===1/0:return{$t:"number",v:"Infinity"};case e===-1/0:return{$t:"number",v:"-Infinity"};default:return e}},revive:function(e){var t=e.v;return Number(t)}}},yn={bigint:{replace:function(e){return{$t:"bigint",v:""+e}},revive:function(e){return BigInt(e.v)}}},bn={Date:{replace:function(e){return{$t:"Date",v:isNaN(e.getTime())?"NaN":e.toISOString()}},revive:function(e){var t=e.v;return new Date("NaN"===t?NaN:Date.parse(t))}}},mn={Set:{replace:function(e){return{$t:"Set",v:Array.from(e.entries())}},revive:function(e){var t=e.v;return new Set(t)}}},gn={Map:{replace:function(e){return{$t:"Map",v:Array.from(e.entries())}},revive:function(e){var t=e.v;return new Map(t)}}},wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"===typeof t?t:void 0,_n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce((function(e,t){return c(c({},e),{},r({},t,{replace:function(e,n,r){return{$t:t,v:r.ArrayBuffer.replace(0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength),n,r).v}},revive:function(e,n,r){var i=e.v,o=wn[t];return o&&new o(r.ArrayBuffer.revive({v:i},n,r))}}))}),{}),xn={ArrayBuffer:{replace:function(e){return{$t:"ArrayBuffer",v:Et(e)}},revive:function(e){var t=St(e.v);return t.buffer.byteLength===t.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}}},kn=function e(t,n){h(this,e),this.buf=t,this.type=n};function En(e){var t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return t.responseText}function Sn(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}var An={Blob:{test:function(e,t){return"Blob"===t||e instanceof kn},replace:function(e){return{$t:"Blob",v:Ge(e instanceof kn?e.buf:Sn(En(e))),type:e.type}},revive:function(e){var t=e.type,n=e.v,r=ze(n);return void 0!==typeof Blob?new Blob([r]):new kn(r.buffer,t)}}},Tn=c(c(c(c(c(c(c(c({},vn),yn),bn),mn),gn),_n),xn),An);function On(e){return new Promise((function(t,n){var r=new FileReader;r.onabort=function(e){return n(new Error("file read aborted"))},r.onerror=function(e){return n(e.target.error)},r.onload=function(e){return t(e.target.result)},r.readAsText(e)}))}function In(e){return new Promise((function(t,n){var r=new FileReader;r.onabort=function(e){return n(new Error("file read aborted"))},r.onerror=function(e){return n(e.target.error)},r.onload=function(e){return t(e.target.result)},r.readAsArrayBuffer(e)}))}var Pn={undefined:{replace:function(){},revive:function(){}}},Cn="undefined"!==typeof BigInt,Rn=function(){function e(t){h(this,e),this.v=t}return p(e,[{key:"toString",value:function(){return this.v}}],[{key:"compare",value:function(e,t){if("bigint"===typeof e)return e<t?-1:e>t?1:0;if("bigint"===typeof t)throw new TypeError("Can't compare real bigint with FakeBigInt");return Number(e)<Number(t)?-1:Number(e)>Number(t)?1:0}}]),e}(),jn=c(c({},Pn),Cn?{}:{bigint:{test:function(e){return e instanceof Rn},replace:function(e){return c({$t:"bigint"},e)},revive:function(e){var t=e.v;return new Rn(t)}}}),Nn=pn(Tn,jn),Dn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=pn.apply(void 0,[Tn,dn].concat(t));return{toBinary:function(e){var t=this.stringify(e),n=s(t,2),r=n[0],i=n[1],o=new ArrayBuffer(4);return new DataView(o).setUint32(0,r.size),new Blob([o,r,i])},stringify:function(e){var t=[],n=r.stringify(e,t);return[new Blob(t.map((function(e){var t=new ArrayBuffer(4);return new DataView(t).setUint32(0,"byteLength"in e?e.byteLength:e.size),new Blob([t,e])}))),n]},parse:function(e,t){return u(o.mark((function n(){var i,u,a,s,c,l;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=0,u=[],n.next=4,In(t);case 4:for(a=n.sent,s=new DataView(a);i<a.byteLength;)c=s.getUint32(i),i+=4,l=a.slice(i,i+c),i+=c,u.push(l);return n.abrupt("return",r.parse(e,u));case 8:case"end":return n.stop()}}),n)})))()},fromBinary:function(e){var t=this;return u(o.mark((function n(){var r,i,u;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=DataView,n.next=3,In(e.slice(0,4));case 3:return n.t1=n.sent,r=new n.t0(n.t1).getUint32(0),i=e.slice(4,r+4),n.next=8,On(e.slice(r+4));case 8:return u=n.sent,n.next=11,t.parse(u,i);case 11:return n.abrupt("return",n.sent);case 12:case"end":return n.stop()}}),n)})))()}}}(jn);function Un(e,t,n,r,i,o){return Bn.apply(this,arguments)}function Bn(){return(Bn=u(o.mark((function e(t,n,r,i,u,a){var s,c,l,f,h,p;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},e.next=3,nt(i);case 3:return(c=e.sent)&&(s.Authorization="Bearer ".concat(c)),l={dbID:null===n||void 0===n?void 0:n.remoteDbId,schema:a||{},lastPull:n?{serverRevision:n.serverRevision,realms:n.realms,inviteRealms:n.inviteRealms}:void 0,baseRevs:r,changes:t},console.debug("Sync request",l),i.syncStateChangedEvent.next({phase:"pushing"}),e.next=10,fetch("".concat(u,"/sync"),{method:"post",headers:s,body:Nn.stringify(l)});case 10:if(f=e.sent,i.syncStateChangedEvent.next({phase:"pulling"}),f.ok){e.next=14;break}throw new pt(f);case 14:e.t0=f.headers.get("content-type"),e.next="application/x-bison"===e.t0?17:("application/x-bison-stream"===e.t0||e.t0,22);break;case 17:return e.t1=Dn,e.next=20,f.blob();case 20:return e.t2=e.sent,e.abrupt("return",e.t1.fromBinary.call(e.t1,e.t2));case 22:return e.next=24,f.text();case 24:return h=e.sent,p=Nn.parse(h),e.abrupt("return",p);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e,t,n){return Kn.apply(this,arguments)}function Kn(){return(Kn=u(o.mark((function e(t,n,r){var i,u,s,c;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Set(r||[]),u=a(t),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=24;break}if("members"!==(c=s.value).name){e.next=11;break}return e.next=9,c.toCollection().modify((function(e){i.has(e.realmId)||e.userId!==m.userId||(e.userId=n.userId)}));case 9:e.next=22;break;case 11:if("roles"!==c.name){e.next=15;break}e.next=22;break;case 15:if("realms"!==c.name){e.next=20;break}return e.next=18,c.toCollection().modify((function(e){(i.has(e.realmId)||e.owner)&&e.owner!==m.userId||(e.owner=n.userId)}));case 18:e.next=22;break;case 20:return e.next=22,c.toCollection().modify((function(e){e.realmId&&i.has(e.realmId)||(e.owner&&e.owner!==m.userId||(e.owner=n.userId),e.realmId&&e.realmId!==m.userId||(e.realmId=n.userId))}));case 22:e.next=4;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(2),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[2,26,29,32]])})))).apply(this,arguments)}function Mn(e,t,n){return Fn.apply(this,arguments)}function Fn(){return(Fn=u(o.mark((function e(t,n,r){var i,u,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.bulkGet(n);case 2:return i=e.sent,u=[],a=[],n.forEach((function(e,n){var o=i[n];if(o){for(var c=0,l=Object.entries(r[n]);c<l.length;c++){var f=s(l[c],2),h=f[0],p=f[1];if(h===t.schema.primKey.keyPath)throw new Error("Cannot change primary key");b.default.setByKeyPath(o,h,p)}u.push(e),a.push(o)}})),e.next=8,null==t.schema.primKey.keyPath?t.bulkPut(a,u):t.bulkPut(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(e){if(null===e||void 0===e?void 0:e.cancelled)throw new b.default.AbortError("Operation was cancelled")}var Wn=navigator.onLine;self.addEventListener("online",(function(){return Wn=!0})),self.addEventListener("offline",(function(){return Wn=!1}));var Yn=new WeakSet,Vn="currentSyncWorker";function Hn(e,t,n,r){return $n.apply(this,arguments).then((function(){e.syncStateChangedEvent.next({phase:"in-sync"})})).catch(function(){var i=u(o.mark((function i(u){return o.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(console.debug("Error from _sync",{isOnline:Wn,syncOptions:r,error:u}),!(Wn&&(null===r||void 0===r?void 0:r.retryImmediatelyOnFetchError)&&"TypeError"===(null===u||void 0===u?void 0:u.name)&&/fetch/.test(null===u||void 0===u?void 0:u.message))){i.next=8;break}return e.syncStateChangedEvent.next({phase:"error",error:u}),i.next=5,new Promise((function(e){return setTimeout(e,500)}));case 5:return i.next=7,Hn(e,t,n,c(c({},r),{},{retryImmediatelyOnFetchError:!1}));case 7:return i.abrupt("return",i.sent);case 8:return i.next=10,e.$syncState.update("syncState",{timestamp:new Date,error:""+u});case 10:return e.syncStateChangedEvent.next({phase:Wn?"error":"offline",error:u}),i.abrupt("return",Promise.reject(u));case 12:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())}function $n(e,t,n){return zn.apply(this,arguments)}function zn(){return(zn=u(o.mark((function e(t,n,r){var i,c,l,f,h,p,d,v,y,b,m,g,w,_,x,k,E,S,A,T,O=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=O.length>3&&void 0!==O[3]?O[3]:{isInitialSync:!1},c=i.isInitialSync,l=i.cancelToken,(f=i.justCheckIfNeeded)||console.debug("SYNC STARTED",{isInitialSync:c}),null===(h=t.cloud.options)||void 0===h?void 0:h.databaseUrl){e.next=4;break}throw new Error("Internal error: sync must not be called when no databaseUrl is configured");case 4:return p=n.databaseUrl,e.next=7,t.getCurrentUser();case 7:return d=e.sent,v=d.isLoggedIn?nn(t):[],y=v.map((function(e){return t.table(Bt(e.name))})),e.next=12,t.getPersistedSyncState();case 12:if(b=e.sent,m=!c&&d.isLoggedIn?un(t,b):[],qn(l),!(g=m.length>0)){e.next=23;break}if(!f){e.next=19;break}return e.abrupt("return",!0);case 19:return console.debug("sync doSyncify is true"),e.next=22,t.transaction("rw",m,function(){var e=u(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.idbtrans.disableChangeTracking=!0,t.idbtrans.disableAccessControl=!0,e.next=4,Ln(m,d,null===b||void 0===b?void 0:b.realms);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 22:qn(l);case 23:return e.next=25,t.transaction("r",t.tables,u(o.mark((function e(){var n,i,u,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPersistedSyncState();case 2:return n=e.sent,e.next=5,t.$baseRevs.toArray();case 5:return i=e.sent,e.next=8,sn(y);case 8:if(u=e.sent,qn(l),!g){e.next=17;break}return e.next=13,rn(m,d,r,null===b||void 0===b?void 0:b.realms);case 13:return a=e.sent,qn(l),u=u.concat(a),e.abrupt("return",[u,n,i]);case 17:return e.abrupt("return",[u,n,i]);case 18:case"end":return e.stop()}}),e)}))));case 25:if(w=e.sent,_=s(w,3),x=_[0],k=_[1],E=_[2],!f){e.next=34;break}return S=x.some((function(e){return e.muts.some((function(e){return e.keys.length>0}))})),console.debug("Sync is needed:",S),e.abrupt("return",S);case 34:return A=Qn(x,null===k||void 0===k?void 0:k.latestRevisions),qn(l),e.next=38,Un(x,k,E,t,p,r);case 38:return T=e.sent,console.debug("Sync response",T),e.next=42,t.transaction("rw",t.tables,function(){var e=u(o.mark((function e(n){var i,u,s,c,l,f,h,p,d,b;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.idbtrans.disableChangeTracking=!0,n.idbtrans.disableAccessControl=!0,i=0,u=Object.keys(r);i<u.length;i++)s=u[i],T.schema[s]&&(r[s]=T.schema[s]);return e.next=5,t.$syncState.put(r,"schema");case 5:return e.next=7,sn(y,t,{since:A});case 7:c=e.sent,l=a(y),e.prev=9,h=o.mark((function e(){var n,r,i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.value,r=an(n.name),c.some((function(e){return e.table===r&&e.muts.length>0}))){e.next=7;break}return e.next=5,Promise.all([n.clear(),t.$baseRevs.where({tableName:r}).delete()]);case 5:e.next=14;break;case 7:if(!A[n.name]){e.next=13;break}return i=A[n.name]||0,e.next=11,Promise.all([n.where("rev").belowOrEqual(i).delete(),t.$baseRevs.where(":id").between([r,-1/0],[r,i+1],!0,!0).reverse().offset(1).delete()]);case 11:e.next=14;break;case 13:case 14:case"end":return e.stop()}}),e)})),l.s();case 12:if((f=l.n()).done){e.next=16;break}return e.delegateYield(h(),"t0",14);case 14:e.next=12;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(9),l.e(e.t1);case 21:return e.prev=21,l.f(),e.finish(21);case 24:return Qn(c,A),e.next=27,t.$baseRevs.bulkPut(Object.keys(r).filter((function(e){return r[e].markedForSync})).map((function(e){return{tableName:e,clientRev:(A[e]||0)+1,serverRev:T.serverRevision}})));case 27:return e.next=29,t.getPersistedSyncState();case 29:return p=e.sent,e.next=32,Gn(t,T,p);case 32:return(d=p||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[]}).syncedTables=v.map((function(e){return e.name})).concat(m.map((function(e){return e.name}))),d.latestRevisions=A,d.remoteDbId=T.dbId,d.initiallySynced=!0,d.realms=T.realms,d.inviteRealms=T.inviteRealms,d.serverRevision=T.serverRevision,d.timestamp=new Date,delete d.error,b=er(T.changes,c),e.next=45,Xn(b,t);case 45:return t.$syncState.put(d,"syncState"),e.abrupt("return",0===c.length);case 47:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})));return function(t){return e.apply(this,arguments)}}());case 42:if(e.sent){e.next=48;break}return console.debug("MORE SYNC NEEDED. Go for it again!"),e.next=47,$n(t,n,r,{isInitialSync:c,cancelToken:l});case 47:return e.abrupt("return",e.sent);case 48:return console.debug("SYNC DONE",{isInitialSync:c}),e.abrupt("return",!1);case 50:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gn(e,t,n){return Jn.apply(this,arguments)}function Jn(){return(Jn=u(o.mark((function e(t,n,r){var i,u,s,c,l,f;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],u=r?r.realms.concat(r.inviteRealms):[],s=new Set([].concat(d(n.realms),d(n.inviteRealms))),c=a(u);try{for(c.s();!(l=c.n()).done;)f=l.value,s.has(f)||i.push(f)}catch(h){c.e(h)}finally{c.f()}if(!(i.length>0)){e.next=7;break}return e.delegateYield(o.mark((function e(){var n,r,u,s,c;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Set(i),r=nn(t),u=a(r),e.prev=3,u.s();case 5:if((s=u.n()).done){e.next=16;break}if(!(c=s.value).schema.indexes.some((function(e){return"realmId"===e.keyPath||Array.isArray(e.keyPath)&&"realmId"===e.keyPath[0]}))){e.next=12;break}return e.next=10,c.where("realmId").anyOf(i).delete();case 10:e.next=14;break;case 12:return e.next=14,c.filter((function(e){return!!(null===e||void 0===e?void 0:e.realmId)&&n.has(e.realmId)})).delete();case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),u.e(e.t0);case 21:return e.prev=21,u.f(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[3,18,21,24]])}))(),"t0",7);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.table,u=i.muts,s=u.length>0&&u[u.length-1].rev||0;n[o]=s}}catch(c){r.e(c)}finally{r.f()}return n}function Xn(e,t){return Zn.apply(this,arguments)}function Zn(){return(Zn=u(o.mark((function e(t,n){var r,i,u;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.debug("Applying server changes",t,b.default.currentTransaction),r=a(t),e.prev=2,u=o.mark((function e(){var t,r,u,s,c,l,f,h;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.value,r=t.table,u=t.muts,s=n.table(r),c=s.core.schema.primaryKey,l=a(u),e.prev=4,h=o.mark((function e(){var t;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=f.value,e.t0=t.type,e.next="insert"===e.t0?4:"upsert"===e.t0?13:"modify"===e.t0?22:"update"===e.t0?30:"delete"===e.t0?33:36;break;case 4:if(!c.outbound){e.next=9;break}return e.next=7,s.bulkAdd(t.values,t.keys);case 7:e.next=12;break;case 9:return t.keys.forEach((function(e,n){b.default.setByKeyPath(t.values[n],c.keyPath,e)})),e.next=12,s.bulkAdd(t.values);case 12:return e.abrupt("break",36);case 13:if(!c.outbound){e.next=18;break}return e.next=16,s.bulkPut(t.values,t.keys);case 16:e.next=21;break;case 18:return t.keys.forEach((function(e,n){b.default.setByKeyPath(t.values[n],c.keyPath,e)})),e.next=21,s.bulkPut(t.values);case 21:return e.abrupt("break",36);case 22:if(1!==t.keys.length){e.next=27;break}return e.next=25,s.update(t.keys[0],t.changeSpec);case 25:e.next=29;break;case 27:return e.next=29,s.where(":id").anyOf(t.keys).modify(t.changeSpec);case 29:return e.abrupt("break",36);case 30:return e.next=32,Mn(s,t.keys,t.changeSpecs);case 32:return e.abrupt("break",36);case 33:return e.next=35,s.bulkDelete(t.keys);case 35:return e.abrupt("break",36);case 36:case"end":return e.stop()}}),e)})),l.s();case 7:if((f=l.n()).done){e.next=11;break}return e.delegateYield(h(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),l.e(e.t1);case 16:return e.prev=16,l.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})),r.s();case 5:if((i=r.n()).done){e.next=9;break}return e.delegateYield(u(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),r.e(e.t1);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}function er(e,t){var n={};N(n,e);var r={};return N(r,t),function(e,t){for(var n,r,i,o=0,u=Object.entries(t);o<u.length;o++)for(var a=s(u[o],2),c=a[0],l=a[1],f=0,h=Object.entries(l);f<h.length;f++){var p=s(h[f],2),d=p[0],v=p[1];switch(v.type){case"ups":var y=null===(n=e[c])||void 0===n?void 0:n[d];if(y)switch(y.type){case"ups":delete e[c][d];break;case"del":break;case"upd":delete e[c][d]}break;case"del":null===(r=e[c])||void 0===r||delete r[d];break;case"upd":var b=null===(i=e[c])||void 0===i?void 0:i[d];if(b)switch(b.type){case"ups":for(var m=0,g=Object.entries(v.mod);m<g.length;m++){var w=s(g[m],2),_=w[0],x=w[1];O(b.val,_,x)}break;case"del":break;case"upd":for(var k=0,E=Object.keys(v.mod);k<E.length;k++){var S=E[k];delete b.mod[S]}}}}}(n,r),function(e){for(var t=I(16),n={},r=0,i=Object.entries(e);r<i.length;r++)for(var o=s(i[r],2),u=o[0],a=o[1],c=0,l=Object.entries(a);c<l.length;c++){var f=s(l[c],2),h=f[0],p=f[1],d=n[u]||(n[u]={});(d[p.type]||(d[p.type]=[])).push(Object.assign({key:h},p))}for(var v=[],y=0,b=Object.entries(n);y<b.length;y++){for(var m=s(b[y],2),g=m[0],w=m[1],_={table:g,muts:[]},x=0,k=Object.entries(w);x<k.length;x++){var E=s(k[x],2),S=E[0],A=E[1];switch(S){case"ups":var T={type:"upsert",keys:A.map((function(e){return e.key})),values:A.map((function(e){return e.val})),txid:t};_.muts.push(T);break;case"upd":var O={type:"update",keys:A.map((function(e){return e.key})),changeSpecs:A.map((function(e){return e.mod})),txid:t};_.muts.push(O);break;case"del":var P={type:"delete",keys:A.map((function(e){return e.key})),txid:t};_.muts.push(P)}}v.push(_)}return v}(n)}function tr(e,t,n){return nr.apply(this,arguments)}function nr(){return(nr=u(o.mark((function e(t,n,r){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Performing initial sync"),e.next=3,en(t,"initialSync","$jobs",u(o.mark((function e(){var i;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPersistedSyncState();case 2:if(null===(i=e.sent)||void 0===i?void 0:i.initiallySynced){e.next=6;break}return e.next=6,Hn(t,n,r,{isInitialSync:!0});case 6:case"end":return e.stop()}}),e)}))),{awaitRemoteJob:!0});case 3:console.debug("Done initial sync");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rr=function(e){l(n,e);var t=f(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).name="TokenExpiredError",e}return n}(i(Error)),ir=2e4,or=function(e){l(n,e);var t=f(n);function n(e,r,i,o){return h(this,n),t.call(this,(function(t){return new ar(e,r,i,o,t)}))}return n}(v.Observable),ur=0,ar=function(e){l(n,e);var t=f(n);function n(e,r,i,o,u){var a;return h(this,n),(a=t.call(this,(function(){return a.teardown()}))).id=++ur,a.onVisibilityChange=function(){"visible"===document.visibilityState&&a.onUserActive()},a.onUserActive=function(){a.lastUserActivity=new Date,a.ws?a.lastPing<new Date(Date.now()-ir)&&a.lastServerActivity<a.lastPing&&a.reconnect():a.databaseUrl&&a.reconnect()},console.debug("New WebSocket Connection",a.id,i?"authorized":"unauthorized"),a.databaseUrl=e,a.rev=r,a.token=i,a.tokenExpiration=o,a.subscriber=u,a.connect(),window.addEventListener("mousemove",a.onUserActive),window.addEventListener("keydown",a.onUserActive),window.addEventListener("wheel",a.onUserActive),"undefined"!==typeof document&&document.addEventListener("visibilitychange",a.onVisibilityChange),a}return p(n,[{key:"teardown",value:function(){console.debug("Teardown WebSocket Connection",this.id),this.disconnect(),window.removeEventListener("mousemove",this.onUserActive),window.removeEventListener("keydown",this.onUserActive),window.removeEventListener("wheel",this.onUserActive),"undefined"!==typeof document&&document.removeEventListener("visibilitychange",this.onVisibilityChange)}},{key:"disconnect",value:function(){if(this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch(Ei){}this.ws=null}},{key:"isUserActive",value:function(){return this.lastUserActivity>=new Date(Date.now()-3e5)}},{key:"reconnect",value:function(){this.disconnect(),this.connect()}},{key:"connect",value:function(){var e=u(o.mark((function e(){var t,n,r,i=this;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.lastServerActivity=new Date,!(this.pauseUntil&&this.pauseUntil>new Date)){e.next=3;break}return e.abrupt("return");case 3:if(!this.ws){e.next=5;break}throw new Error("Called connect() when a connection is already open");case 5:if(this.databaseUrl){e.next=7;break}throw new Error("Cannot connect without a database URL");case 7:if(!this.closed){e.next=9;break}return e.abrupt("return");case 9:if(!(this.tokenExpiration&&this.tokenExpiration<new Date)){e.next=12;break}return this.subscriber.error(new rr),e.abrupt("return");case 12:if(this.pinger=setInterval(u(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.closed){e.next=3;break}return i.teardown(),e.abrupt("return");case 3:if(i.isUserActive())if(i.ws)try{i.ws.send(JSON.stringify({type:"ping"})),setTimeout((function(){i.pinger&&(i.closed?i.teardown():i.lastServerActivity<new Date(Date.now()-ir)&&(i.isUserActive()?i.reconnect():i.disconnect()))}),ir)}catch(Ei){i.reconnect()}else i.reconnect();else i.disconnect();case 4:case"end":return e.stop()}}),e)}))),3e4),(t=new URL(this.databaseUrl)).protocol="http:"===t.protocol?"ws":"wss",n=new URLSearchParams,!this.subscriber.closed){e.next=18;break}return e.abrupt("return");case 18:return n.set("rev",this.rev),this.token&&n.set("token",this.token),console.debug("dexie-cloud WebSocket create"),(r=this.ws=new WebSocket("".concat(t,"/revision?").concat(n))).onclose=function(e){console.debug("dexie-cloud WebSocket "),i.disconnect()},r.onmessage=function(e){console.debug("dexie-cloud WebSocket onmessage",e.data),i.lastServerActivity=new Date;try{var t=JSON.parse(e.data);if("error"===t.type)throw new Error("dexie-cloud WebSocket Error ".concat(t.error));"rev"===t.type&&(i.rev=t.rev),"pong"!==t.type&&i.subscriber.next(t)}catch(ri){i.disconnect(),i.pauseUntil=new Date(Date.now()+6e4)}},e.prev=24,e.next=27,new Promise((function(e,t){r.onopen=function(t){console.debug("dexie-cloud WebSocket onopen"),e(null)},r.onerror=function(e){var n=e.error||new Error("WebSocket Error");console.debug("dexie-cloud WebSocket error",n),i.disconnect(),t(n)}}));case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(24),this.pauseUntil=new Date(Date.now()+6e4);case 32:case"end":return e.stop()}}),e,this,[[24,29]])})));return function(){return e.apply(this,arguments)}}()}]),n}(v.Subscription);function sr(e){e.cloud.usingServiceWorker?Wt(e):e.localSyncEvent.next({})}function cr(){return"undefined"===typeof document?new v.BehaviorSubject("visible"):v.fromEvent(document,"visibilitychange").pipe(_e((function(){return document.visibilityState})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return pe(n)?(e.pop(),function(t){return Ie(e,t,n)}):function(t){return Ie(e,t)}}(document.visibilityState))}function lr(e){var t;if(!(null===(t=e.cloud.options)||void 0===t?void 0:t.databaseUrl))throw new Error("No database URL to connect WebSocket to");return function t(){return cr().pipe(Ne((function(e){return"visible"===e})),Me((function(){return e.cloud.currentUser})),Ne((function(t){var n,r;return(null===(r=null===(n=e.cloud.persistedSyncState)||void 0===n?void 0:n.value)||void 0===r?void 0:r.serverRevision)&&(!t.accessToken||!t.accessTokenExpiration||t.accessTokenExpiration>new Date)})),Me((function(t){var n,r;return new or(e.cloud.options.databaseUrl,null===(r=null===(n=e.cloud.persistedSyncState)||void 0===n?void 0:n.value)||void 0===r?void 0:r.serverRevision,t.accessToken,t.accessTokenExpiration)})),(n=function(n){return v.from(function(){return r.apply(this,arguments)}()).pipe(Me((function(){return t()})));function r(){return(r=u(o.mark((function t(){var r,i;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("TokenExpiredError"!==(null===n||void 0===n?void 0:n.name)){t.next=10;break}return console.debug("WebSocket observable: Token expired. Refreshing token..."),r=e.cloud.currentUser.value,t.next=5,ut(e.cloud.options.databaseUrl,r);case 5:return i=t.sent,t.next=8,e.table("$logins").update(r.userId,{accessToken:i.accessToken,accessTokenExpiration:i.accessTokenExpiration});case 8:t.next=12;break;case 10:throw console.error("WebSocket observable:",n),n;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},function(e){var t=new de(n),r=e.lift(t);return t.caught=r}));var n}().subscribe(function(){var t=u(o.mark((function t(n){var r,i,u;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPersistedSyncState();case 2:u=t.sent,t.t0=n.type,t.next="rev"===t.t0?6:"realm-added"===t.t0?8:"realm-removed"===t.t0?10:12;break;case 6:return(!(null===u||void 0===u?void 0:u.serverRevision)||Rn.compare(u.serverRevision,"undefined"===typeof BigInt?new Rn(n.rev):BigInt(n.rev))<0)&&sr(e),t.abrupt("break",12);case 8:return(null===(r=null===u||void 0===u?void 0:u.realms)||void 0===r?void 0:r.includes(n.realm))||sr(e),t.abrupt("break",12);case 10:return(null===(i=null===u||void 0===u?void 0:u.realms)||void 0===i?void 0:i.includes(n.realm))&&sr(e),t.abrupt("break",12);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function fr(e){return hr.apply(this,arguments)}function hr(){return(hr=u(o.mark((function e(t){var n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(n=t.cloud.options)||void 0===n?void 0:n.databaseUrl)||!t.cloud.schema){e.next=6;break}return e.next=3,Hn(t,t.cloud.options,t.cloud.schema,{justCheckIfNeeded:!0});case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=!1;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e,t,n,r){return dr.apply(this,arguments)}function dr(){return(dr=u(o.mark((function e(t,n,r,i){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Yn.has(t)){e.next=2;break}return e.abrupt("return");case 2:if(Yn.add(t),e.prev=3,!t.cloud.usingServiceWorker){e.next=10;break}if(!xt){e.next=8;break}return e.next=8,Hn(t,n,r,i);case 8:e.next=12;break;case 10:return e.next=12,en(t,Vn,"$jobs",(function(){return Hn(t,n,r,i)}));case 12:Yn.delete(t),console.debug("Done sync"),e.next=21;break;case 16:throw e.prev=16,e.t0=e.catch(3),Yn.delete(t),console.error("Failed to sync client changes",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}function vr(e,t,n){var r=null,i={cancelled:!1};function o(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;pr(e,t,n,{cancelToken:i,retryImmediatelyOnFetchError:!0}).catch((function(e){console.error("error in syncIfPossible()",e),i.cancelled?u():r<3&&setTimeout((function(){return o(r+1)}),[0,5,15][r]*Jt)}))}var u=function(){console.debug("Stopping LocalSyncWorker"),i.cancelled=!0,r&&r.unsubscribe()};return{start:function(){console.debug("Starting LocalSyncWorker",e.localSyncEvent.id),r=e.localSyncEvent.subscribe((function(){try{o()}catch(e){console.error("What-the....",e)}}))},stop:u}}function yr(e,t){if(e&&t&&t.unsyncedTables){var n,r=a(t.unsyncedTables);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i]&&(e[i].markedForSync=!1)}}catch(o){r.e(o)}finally{r.f()}}}function br(e){var t,n,r,i=a(e.tables);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null===(n=null===(t=e.cloud.schema)||void 0===t?void 0:t[o.name])||void 0===n?void 0:n.markedForSync){if(o.schema.primKey.auto)throw new b.default.SchemaError("Table ".concat(o.name," is both autoIncremented and synced. ")+"Use db.cloud.configure({unsyncedTables: [".concat(JSON.stringify(o.name),"]}) to blacklist it from sync"));if(!o.schema.primKey.keyPath)throw new b.default.SchemaError("Table ".concat(o.name," cannot be both synced and outbound. ")+"Use db.cloud.configure({unsyncedTables: [".concat(JSON.stringify(o.name),"]}) to blacklist it from sync"))}}}catch(u){i.e(u)}finally{i.f()}}var mr,gr,wr,_r,xr={},kr=[],Er=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Sr(e,t){for(var n in t)e[n]=t[n];return e}function Ar(e){var t=e.parentNode;t&&t.removeChild(e)}function Tr(e,t,n){var r,i,o,u=arguments,a={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:a[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(u[o]);if(null!=n&&(a.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return Or(e,a,r,i,null)}function Or(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++mr.__v:i};return null!=mr.vnode&&mr.vnode(o),o}function Ir(e){return e.children}function Pr(e,t){this.props=e,this.context=t}function Cr(e,t){if(null==t)return e.__?Cr(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Cr(e):null}function Rr(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Rr(e)}}function jr(e){(!e.__d&&(e.__d=!0)&&gr.push(e)&&!Nr.__r++||_r!==mr.debounceRendering)&&((_r=mr.debounceRendering)||wr)(Nr)}function Nr(){for(var e;Nr.__r=gr.length;)e=gr.sort((function(e,t){return e.__v.__b-t.__v.__b})),gr=[],e.some((function(e){var t,n,r,i,o,u;e.__d&&(o=(i=(t=e).__v).__e,(u=t.__P)&&(n=[],(r=Sr({},i)).__v=i.__v+1,qr(u,i,r,t.__n,void 0!==u.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?Cr(i):o,i.__h),Wr(n,i),i.__e!=o&&Rr(i)))}))}function Dr(e,t,n,r,i,o,u,a,s,c){var l,f,h,p,d,v,y,b=r&&r.__k||kr,m=b.length;for(n.__k=[],l=0;l<t.length;l++)if(null!=(p=n.__k[l]=null==(p=t[l])||"boolean"==typeof p?null:"string"==typeof p||"number"==typeof p||"bigint"==typeof p?Or(null,p,null,null,p):Array.isArray(p)?Or(Ir,{children:p},null,null,null):p.__b>0?Or(p.type,p.props,p.key,null,p.__v):p)){if(p.__=n,p.__b=n.__b+1,null===(h=b[l])||h&&p.key==h.key&&p.type===h.type)b[l]=void 0;else for(f=0;f<m;f++){if((h=b[f])&&p.key==h.key&&p.type===h.type){b[f]=void 0;break}h=null}qr(e,p,h=h||xr,i,o,u,a,s,c),d=p.__e,(f=p.ref)&&h.ref!=f&&(y||(y=[]),h.ref&&y.push(h.ref,null,p),y.push(f,p.__c||d,p)),null!=d?(null==v&&(v=d),"function"==typeof p.type&&null!=p.__k&&p.__k===h.__k?p.__d=s=Ur(p,s,e):s=Br(e,p,h,b,d,s),c||"option"!==n.type?"function"==typeof n.type&&(n.__d=s):e.value=""):s&&h.__e==s&&s.parentNode!=e&&(s=Cr(h))}for(n.__e=v,l=m;l--;)null!=b[l]&&("function"==typeof n.type&&null!=b[l].__e&&b[l].__e==n.__d&&(n.__d=Cr(r,l+1)),Hr(b[l],b[l]));if(y)for(l=0;l<y.length;l++)Vr(y[l],y[++l],y[++l])}function Ur(e,t,n){var r,i;for(r=0;r<e.__k.length;r++)(i=e.__k[r])&&(i.__=e,t="function"==typeof i.type?Ur(i,t,n):Br(n,i,i,e.__k,i.__e,t));return t}function Br(e,t,n,r,i,o){var u,a,s;if(void 0!==t.__d)u=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),u=null;else{for(a=o,s=0;(a=a.nextSibling)&&s<r.length;s+=2)if(a==i)break e;e.insertBefore(i,o),u=o}return void 0!==u?u:i.nextSibling}function Lr(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||Er.test(t)?n:n+"px"}function Kr(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Lr(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Lr(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?Fr:Mr,o):e.removeEventListener(t,o?Fr:Mr,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function Mr(e){this.l[e.type+!1](mr.event?mr.event(e):e)}function Fr(e){this.l[e.type+!0](mr.event?mr.event(e):e)}function qr(e,t,n,r,i,o,u,a,s){var c,l,f,h,p,d,v,y,b,m,g,w=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(s=n.__h,a=t.__e=n.__e,t.__h=null,o=[a]),(c=mr.__b)&&c(t);try{e:if("function"==typeof w){if(y=t.props,b=(c=w.contextType)&&r[c.__c],m=c?b?b.props.value:c.__:r,n.__c?v=(l=t.__c=n.__c).__=l.__E:("prototype"in w&&w.prototype.render?t.__c=l=new w(y,m):(t.__c=l=new Pr(y,m),l.constructor=w,l.render=$r),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=m,l.__n=r,f=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=w.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=Sr({},l.__s)),Sr(l.__s,w.getDerivedStateFromProps(y,l.__s))),h=l.props,p=l.state,f)null==w.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==w.getDerivedStateFromProps&&y!==h&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(y,m),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(y,l.__s,m)||t.__v===n.__v){l.props=y,l.state=l.__s,t.__v!==n.__v&&(l.__d=!1),l.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),l.__h.length&&u.push(l);break e}null!=l.componentWillUpdate&&l.componentWillUpdate(y,l.__s,m),null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(h,p,d)}))}l.context=m,l.props=y,l.state=l.__s,(c=mr.__r)&&c(t),l.__d=!1,l.__v=t,l.__P=e,c=l.render(l.props,l.state,l.context),l.state=l.__s,null!=l.getChildContext&&(r=Sr(Sr({},r),l.getChildContext())),f||null==l.getSnapshotBeforeUpdate||(d=l.getSnapshotBeforeUpdate(h,p)),g=null!=c&&c.type===Ir&&null==c.key?c.props.children:c,Dr(e,Array.isArray(g)?g:[g],t,n,r,i,o,u,a,s),l.base=t.__e,t.__h=null,l.__h.length&&u.push(l),v&&(l.__E=l.__=null),l.__e=!1}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Yr(n.__e,t,n,r,i,o,u,s);(c=mr.diffed)&&c(t)}catch(e){t.__v=null,(s||null!=o)&&(t.__e=a,t.__h=!!s,o[o.indexOf(a)]=null),mr.__e(e,t,n)}}function Wr(e,t){mr.__c&&mr.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){mr.__e(e,t.__v)}}))}function Yr(e,t,n,r,i,o,u,a){var s,c,l,f,h=n.props,p=t.props,d=t.type,v=0;if("svg"===d&&(i=!0),null!=o)for(;v<o.length;v++)if((s=o[v])&&(s===e||(d?s.localName==d:3==s.nodeType))){e=s,o[v]=null;break}if(null==e){if(null===d)return document.createTextNode(p);e=i?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,p.is&&p),o=null,a=!1}if(null===d)h===p||a&&e.data===p||(e.data=p);else{if(o=o&&kr.slice.call(e.childNodes),c=(h=n.props||xr).dangerouslySetInnerHTML,l=p.dangerouslySetInnerHTML,!a){if(null!=o)for(h={},f=0;f<e.attributes.length;f++)h[e.attributes[f].name]=e.attributes[f].value;(l||c)&&(l&&(c&&l.__html==c.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||Kr(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||Kr(e,o,t[o],n[o],r)}(e,p,h,i,a),l)t.__k=[];else if(v=t.props.children,Dr(e,Array.isArray(v)?v:[v],t,n,r,i&&"foreignObject"!==d,o,u,e.firstChild,a),null!=o)for(v=o.length;v--;)null!=o[v]&&Ar(o[v]);a||("value"in p&&void 0!==(v=p.value)&&(v!==e.value||"progress"===d&&!v)&&Kr(e,"value",v,h.value,!1),"checked"in p&&void 0!==(v=p.checked)&&v!==e.checked&&Kr(e,"checked",v,h.checked,!1))}return e}function Vr(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){mr.__e(e,n)}}function Hr(e,t,n){var r,i,o;if(mr.unmount&&mr.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Vr(r,null,t)),n||"function"==typeof e.type||(n=null!=(i=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){mr.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Hr(r[o],t,n);null!=i&&Ar(i)}function $r(e,t,n){return this.constructor(e,n)}mr={__e:function(e,t){for(var n,r,i;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),i=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),i=n.__d),i)return n.__E=n}catch(t){e=t}throw e},__v:0},Pr.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Sr({},this.state),"function"==typeof e&&(e=e(Sr({},n),this.props)),e&&Sr(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),jr(this))},Pr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),jr(this))},Pr.prototype.render=Ir,gr=[],wr="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Nr.__r=0;var zr={Error:{color:"red"},Alert:{error:{color:"red"},warning:{color:"yellow"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"30px",marginBottom:"2em",maxWidth:"90%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",width:"auto"},Input:{height:"35px",width:"17em",borderColor:"#ccf4",outline:"none",fontSize:"17pt",padding:"8px"}};function Gr(e){var t=e.children;return Tr("div",null,Tr("div",{style:zr.Darken}),Tr("div",{style:zr.DialogOuter},Tr("div",{style:zr.DialogInner},t)))}var Jr,Qr,Xr,Zr=0,ei=[],ti=mr.__b,ni=mr.__r,ri=mr.diffed,ii=mr.__c,oi=mr.unmount;function ui(e,t){mr.__h&&mr.__h(Qr,e,Zr||t),Zr=0;var n=Qr.__H||(Qr.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ai(e){return Zr=1,function(e,t,n){var r=ui(Jr++,2);return r.t=e,r.__c||(r.__=[n?n(t):di(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=Qr),r.__}(di,e)}function si(e){return Zr=5,function(e,t){var n=ui(Jr++,7);return pi(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}((function(){return{current:e}}),[])}function ci(){ei.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(fi),e.__H.__h.forEach(hi),e.__H.__h=[]}catch(Qr){e.__H.__h=[],mr.__e(Qr,e.__v)}})),ei=[]}mr.__b=function(e){Qr=null,ti&&ti(e)},mr.__r=function(e){ni&&ni(e),Jr=0;var t=(Qr=e.__c).__H;t&&(t.__h.forEach(fi),t.__h.forEach(hi),t.__h=[])},mr.diffed=function(e){ri&&ri(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ei.push(t)&&Xr===mr.requestAnimationFrame||((Xr=mr.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),li&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);li&&(t=requestAnimationFrame(n))})(ci)),Qr=void 0},mr.__c=function(e,t){t.some((function(e){try{e.__h.forEach(fi),e.__h=e.__h.filter((function(e){return!e.__||hi(e)}))}catch(Xr){t.some((function(e){e.__h&&(e.__h=[])})),t=[],mr.__e(Xr,e.__v)}})),ii&&ii(e,t)},mr.unmount=function(e){oi&&oi(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(fi)}catch(e){mr.__e(e,t.__v)}};var li="function"==typeof requestAnimationFrame;function fi(e){var t=Qr;"function"==typeof e.__c&&e.__c(),Qr=t}function hi(e){var t=Qr;e.__c=e.__(),Qr=t}function pi(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function di(e,t){return"function"==typeof t?t(e):t}function vi(e){var t=e.title,n=e.alerts,i=e.fields,o=e.onCancel,u=e.onSubmit,a=ai({}),l=s(a,2),f=l[0],h=l[1],p=si();return function(e,t){var n=ui(Jr++,4);!mr.__s&&pi(n.__H,t)&&(n.__=e,n.__H=t,Qr.__h.push(n))}((function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()}),[]),Tr(Gr,null,Tr(Ir,null,Tr("h3",{style:zr.WindowHeader},t),n.map((function(e){return Tr("p",{style:zr.Alert[e.type]},function(e){var t=e.message,n=(e.messageCode,e.messageParams);return t.replace(/\{\w+\}/gi,(function(e){return n[e.substr(1,e.length-2)]}))}(e))})),Tr("form",{onSubmit:function(e){e.preventDefault(),u(f)}},Object.entries(i).map((function(e,t){var n=s(e,2),i=n[0],o=n[1],u=o.type,a=o.label,l=o.placeholder;return Tr("label",{style:zr.Label},a?"".concat(a,": "):"",Tr("input",{ref:0===t?p:void 0,type:u,name:i,autoComplete:"on",style:zr.Input,autoFocus:!0,placeholder:l,value:f[i]||"",onInput:function(e){var t;return h(c(c({},f),{},r({},i,function(e,t){switch(e){case"email":return t.toLowerCase();case"otp":return t.toUpperCase();default:return t}}(u,null===(t=e.target)||void 0===t?void 0:t.value))))}}))})))),Tr("div",{style:zr.ButtonsDiv},Tr("button",{type:"submit",style:zr.Button,onClick:function(){return u(f)}},"Submit"),Tr("button",{style:zr.Button,onClick:o},"Cancel")))}var yi=function(e){l(n,e);var t=f(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).observer=function(e){return r.setState({userInteraction:e})},r.state={userInteraction:void 0},r}return p(n,[{key:"componentDidMount",value:function(){this.subscription=v.from(this.props.db.cloud.userInteraction).subscribe(this.observer)}},{key:"componentWillUnmount",value:function(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}},{key:"render",value:function(e,t){var n=t.userInteraction;return n?Tr(vi,Object.assign({},n)):null}}]),n}(Pr);function bi(e){var t=document.createElement("div");document.body.appendChild(t),function(e,t,n){var r,i,o;mr.__&&mr.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],qr(t,e=(!r&&n||t).__k=Tr(Ir,null,[e]),i||xr,xr,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?kr.slice.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r),Wr(o,e)}(Tr(yi,{db:e.vip}),t);var n=!1;return{unsubscribe:function(){t.remove(),n=!0},get closed(){return n}}}function mi(e){var t=e.name,r=new v.BehaviorSubject(m),i=[],l=null;e.on("ready",function(){var e=u(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),!0);var f,h=!1;function p(){if(h)throw new b.default.DatabaseClosedError}function d(e){return y.apply(this,arguments)}function y(){return(y=u(o.mark((function e(t){var a,f,d,y,b,m,g,w,_;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=!1,g=A(t),xt||((null===(a=g.cloud.options)||void 0===a?void 0:a.customLoginGui)||i.push(bi(t)),i.push(g.syncStateChangedEvent.subscribe(t.cloud.syncState))),g.tables.every((function(e){return e.core}))||kt(),!("serviceWorker"in navigator)){e.next=10;break}return e.next=7,navigator.serviceWorker.getRegistrations();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:return w=e.t0,e.next=14,g.transaction("rw",g.$syncState,u(o.mark((function e(){var t,n,r,i,u,a,l,f,h,p,d,v,y,b,m,_,x;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.cloud,i=r.options,u=r.schema,e.next=3,Promise.all([g.getOptions(),g.getSchema(),g.getPersistedSyncState()]);case 3:if(a=e.sent,l=s(a,3),f=l[0],h=l[1],p=l[2],i){e.next=12;break}g.cloud.options=f||null,e.next=15;break;case 12:if(f&&JSON.stringify(f)===JSON.stringify(i)){e.next=15;break}return e.next=15,g.$syncState.put(i,"options");case 15:if((null===(t=g.cloud.options)||void 0===t?void 0:t.tryUseServiceWorker)&&"serviceWorker"in navigator&&w.length>0&&!_t?(console.debug("Dexie Cloud Addon: Using service worker"),g.cloud.usingServiceWorker=!0):((null===(n=g.cloud.options)||void 0===n?void 0:n.tryUseServiceWorker)&&!xt&&console.debug("dexie-cloud-addon: Not using service worker.",0===w.length?"No SW registrations found.":"serviceWorker"in navigator&&_t?"Avoiding Safari crash triggered by dexie-cloud's service worker.":"navigator.serviceWorker not present"),g.cloud.usingServiceWorker=!1),yr(u,g.cloud.options),yr(h,g.cloud.options),u){e.next=22;break}g.cloud.schema=h||null,e.next=28;break;case 22:if(h&&JSON.stringify(h)===JSON.stringify(u)){e.next=28;break}for(d=h||{},v=0,y=Object.entries(u);v<y.length;v++)b=s(y[v],2),m=b[0],_=b[1],(x=d[m])?(x.markedForSync=_.markedForSync,_.deleted=x.deleted,x.generatedGlobalId=_.generatedGlobalId):d[m]=c({},_);return e.next=27,g.$syncState.put(d,"schema");case 27:Object.assign(u,d);case 28:return e.abrupt("return",null===p||void 0===p?void 0:p.initiallySynced);case 29:case"end":return e.stop()}}),e)}))));case 14:if((_=e.sent)&&g.setInitiallySynced(!0),br(g),!(null===(f=g.cloud.options)||void 0===f?void 0:f.databaseUrl)||_){e.next=21;break}return e.next=20,tr(g,g.cloud.options,g.cloud.schema);case 20:g.setInitiallySynced(!0);case 21:if(p(),xt||(i.push(n.liveQuery((function(){return g.getCurrentUser()})).subscribe(r)),i.push(n.liveQuery((function(){return g.getPersistedSyncState()})).subscribe(g.cloud.persistedSyncState))),!(null===(d=g.cloud.options)||void 0===d?void 0:d.requireAuth)){e.next=26;break}return e.next=26,bt(g);case 26:l&&l.stop(),l=null,p(),g.cloud.usingServiceWorker&&(null===(y=g.cloud.options)||void 0===y?void 0:y.databaseUrl)?(Wt(g).catch((function(){})),Vt(g).catch((function(){}))):(null===(b=g.cloud.options)||void 0===b?void 0:b.databaseUrl)&&g.cloud.schema&&!xt&&(l=vr(g,g.cloud.options,g.cloud.schema)).start(),p(),xt||("undefined"!==typeof document&&i.push(v.fromEvent(document,"visibilitychange").subscribe((function(){}))),i.push(v.fromEvent(self,"online").subscribe((function(){console.debug("online!"),g.syncStateChangedEvent.next({phase:"not-in-sync"}),sr(g)})),v.fromEvent(self,"offline").subscribe((function(){console.debug("offline!"),g.syncStateChangedEvent.next({phase:"offline"})})))),"undefined"!==typeof window&&!xt&&(null===(m=g.cloud.options)||void 0===m?void 0:m.databaseUrl)&&i.push(lr(g));case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e,t){e.on.close.subscribe(t);var n=e.close;e.close=function(){n.call(this),t()}}(e,(function(){i.forEach((function(e){return e.unsubscribe()})),h=!0,l&&l.stop(),l=null,r.next(m)})),e.cloud={version:"1.0.0-beta.3",options:null,schema:null,serverState:null,get currentUserId(){return r.value.userId||m.userId},currentUser:r,syncState:new v.BehaviorSubject({phase:"initial"}),persistedSyncState:new v.BehaviorSubject(void 0),userInteraction:new v.BehaviorSubject(void 0),login:function(t){return u(o.mark((function n(){var r;return o.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=A(e),n.next=3,r.cloud.sync();case 3:return n.next=5,bt(r,t);case 5:case"end":return n.stop()}}),n)})))()},configure:function(n){e.cloud.options=n,n.databaseUrl&&(e.name="".concat(t,"-").concat(function(e){var t=new URL(e);return"/"===t.pathname?t.hostname.split(".")[0]:t.pathname.split("/")[1]}(n.databaseUrl)),A(e).reconfigure()),yr(e.cloud.schema,e.cloud.options)},sync:function(){var t=arguments;return u(o.mark((function r(){var i,a,s,c,l,f,h;return o.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.length>0&&void 0!==t[0]?t[0]:{wait:!0,force:!1},a=i.wait,s=i.force,void 0===a&&(a=!0),c=A(e),!s){r.next=14;break}if(l=c.cloud.persistedSyncState.value,sr(c),!a){r.next=12;break}return r.next=9,c.cloud.persistedSyncState.pipe(Ne((function(e){return null!=(null===e||void 0===e?void 0:e.timestamp)&&(!l||e.timestamp>l.timestamp)})),Be(1)).toPromise();case 9:if(!(null===(f=r.sent)||void 0===f?void 0:f.error)){r.next=12;break}throw new Error("Sync error: "+f.error);case 12:r.next=24;break;case 14:return r.next=16,fr(c);case 16:if(!r.sent){r.next=24;break}if(h=c.cloud.persistedSyncState.value,sr(c),!a){r.next=24;break}return console.debug("db.cloud.login() is waiting for sync completion..."),r.next=23,v.from(n.liveQuery(u(o.mark((function e(){var t,n;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(c);case 2:return t=e.sent,e.next=5,c.getPersistedSyncState();case 5:if((null===(n=e.sent)||void 0===n?void 0:n.timestamp)===(null===h||void 0===h?void 0:h.timestamp)||!(null===n||void 0===n?void 0:n.error)){e.next=8;break}throw new Error("Sync error: "+n.error);case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))))).pipe(Ne((function(e){return!e})),Be(1)).toPromise();case 23:console.debug("Done waiting for sync completion because we have nothing to push anymore");case 24:case"end":return r.stop()}}),r)})))()}},e.Version.prototype._parseStoresSpec=b.default.override(e.Version.prototype._parseStoresSpec,(function(t){return Gt(t,e)})),e.use(zt({currentUserObservable:e.cloud.currentUser,db:A(e)})),e.use((f=A(e),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:function(e){return c(c({},e),{},{table:function(t){var n=e.table(t);return c(c({},n),{},{mutate:function(e){var r,i,o,u=e.trans;if((null===(i=null===(r=f.cloud.schema)||void 0===r?void 0:r[t])||void 0===i?void 0:i.markedForSync)&&(null===(o=u.currentUser)||void 0===o?void 0:o.isLoggedIn)&&("add"===e.type||"put"===e.type)){var s,c=a(e.values);try{for(c.s();!(s=c.n()).done;){var l=s.value;"owner"in l||(l.owner=u.currentUser.userId),"realmId"in l||(l.realmId=u.currentUser.userId)}}catch(h){c.e(h)}finally{c.f()}}return n.mutate(e)}})}})}})),e.use(Ut(A(e)))}mi.version="1.0.0-beta.3",b.default.Cloud=mi;var gi=new Map;function wi(e){return e.startsWith("dexie-cloud:")&&e.split(":")[1]}function _i(e){return xi.apply(this,arguments)}function xi(){return(xi=u(o.mark((function e(t){var n,r,i,u;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return r.dx.on.versionchange.unsubscribe(u),gi.get(r.name)===r&&gi.delete(r.name),r.dx.close(),!1},r=gi.get(t)){e.next=10;break}return console.debug("Dexie Cloud SW: Creating new Dexie instance for",t),i=new b.default(t,{addons:[mi]}),r=A(i),i.on("versionchange",u),e.next=9,r.dx.open();case 9:gi.get(t)||gi.set(t,r);case 10:if(null===(n=r.cloud.options)||void 0===n?void 0:n.databaseUrl){e.next=13;break}return console.error("Dexie Cloud: No databaseUrl configured"),e.abrupt("return");case 13:if(r.cloud.schema){e.next=16;break}return console.error("Dexie Cloud: No schema persisted"),e.abrupt("return");case 16:return e.prev=16,console.debug("Dexie Cloud SW: Syncing"),e.next=20,pr(r,r.cloud.options,r.cloud.schema,{retryImmediatelyOnFetchError:!0});case 20:console.debug("Dexie Cloud SW: Done Syncing"),e.next=29;break;case 23:if(e.prev=23,e.t0=e.catch(16),console.error("Dexie Cloud SW Error",e.t0),u(),e.t0.name===b.default.errnames.NoSuchDatabase){e.next=29;break}throw e.t0;case 29:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}function ki(e){return new Promise((function(t){return setTimeout(t,e)}))}_t||(self.addEventListener("sync",(function(e){console.debug('SW "sync" Event',e.tag);var t=wi(e.tag);t&&e.waitUntil(_i(t))})),self.addEventListener("periodicsync",(function(e){console.debug('SW "periodicsync" Event',e.tag);var t=wi(e.tag);t&&e.waitUntil(_i(t))})),self.addEventListener("message",(function(e){if(console.debug('SW "message" Event',e.data),"dexie-cloud-sync"===e.data.type){var t=e.data.dbName,n=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _i(t).catch(function(){var t=u(o.mark((function t(r){return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(3!==n){t.next=2;break}throw r;case 2:return t.next=4,ki(6e4);case 4:e(n+1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())};"waitUntil"in e?e.waitUntil(n()):n()}})))})(n(40),n(42))}).call(this,n(14).Buffer,n(8))},function(e,t,n){"use strict";(function(e){var r=n(15),i=n(16),o=n(17);function u(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(u()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|e}function d(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,u=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;u=2,a/=2,s/=2,n/=2}function c(e,t){return 1===u?e[t]:e.readUInt16BE(t*u)}if(i){var l=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*u}else-1!==l&&(o-=o-l),l=-1}else for(n+s>a&&(n=a-s),o=n;o>=0;o--){for(var f=!0,h=0;h<s;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var u=0;u<r;++u){var a=parseInt(t.substr(2*u,2),16);if(isNaN(a))return u;e[n+u]=a}return u}function w(e,t,n,r){return W(F(t,e.length-n),e,n,r)}function _(e,t,n,r){return W(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return _(e,t,n,r)}function k(e,t,n,r){return W(q(t),e,n,r)}function E(e,t,n,r){return W(function(e,t){for(var n,r,i,o=[],u=0;u<e.length&&!((t-=2)<0);++u)r=(n=e.charCodeAt(u))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,u,a,s,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(o=e[i+1]))&&(s=(31&c)<<6|63&o)>127&&(l=s);break;case 3:o=e[i+1],u=e[i+2],128===(192&o)&&128===(192&u)&&(s=(15&c)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:o=e[i+1],u=e[i+2],a=e[i+3],128===(192&o)&&128===(192&u)&&128===(192&a)&&(s=(15&c)<<18|(63&o)<<12|(63&u)<<6|63&a)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=u(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"===typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var u=e[n];if(!s.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(r,i),i+=u.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),u=(n>>>=0)-(t>>>=0),a=Math.min(o,u),c=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(c[f]!==l[f]){o=c[f],u=l[f];break}return o<u?-1:u<o?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=M(e[o]);return i}function C(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function U(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||U(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||U(e,0,n,8),i.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var i=t-e;n=new s(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,u=1,a=0;for(this[t]=255&e;++o<n&&(u*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,u=1,a=0;for(this[t+o]=255&e;--o>=0&&(u*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/u>>0)-a&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var u=s.isBuffer(e)?e:F(new s(e,r).toString()),a=u.length;for(o=0;o<n-t;++o)this[o+t]=u[o%a]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],u=0;u<r;++u){if((n=e.charCodeAt(u))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(u+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(K,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(8))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),u=r[0],a=r[1],s=new o(function(e,t,n){return 3*(t+n)/4-n}(0,u,a)),l=0,f=a>0?u-4:u;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],u=16383,a=0,s=n-i;a<s;a+=u)o.push(l(e,a,a+u>s?s:a+u));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=u.length;a<s;++a)r[a]=u[a],i[u.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,u=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),u.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return u.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,u,a=8*i-r-1,s=(1<<a)-1,c=s>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=r;l>0;u=256*u+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===s)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,r),o-=c}return(p?-1:1)*u*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var u,a,s,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=l):(u=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-u))<1&&(u--,s*=2),(t+=u+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(u++,s/=2),u+f>=l?(a=0,u=l):u+f>=1?(a=(t*s-1)*Math.pow(2,i),u+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),u=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(u=u<<i|a,c+=i;c>0;e[n+p]=255&u,p+=d,u/=256,c-=8);e[n+p-d]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(10),i=n(6),o=n(19),u=n(20);function a(t){var n="function"===typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return u(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},a(t)}e.exports=a},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(6),i=n(11);function o(t,n,u){return i()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(C){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),u=new O(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var a=S(u,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(e,n,u),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function y(){}function b(){}function m(){}var g={};g[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(I([])));_&&_!==n&&r.call(_,o)&&(g=_);var x=m.prototype=y.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,u,a){var s=l(e[i],e,o);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,a)}),(function(e){n("throw",e,u,a)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return n("throw",e,u,a)}))}a(s.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,u=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return u.next=u}}return{next:P}}function P(){return{value:t,done:!0}}return b.prototype=x.constructor=m,m.constructor=b,b.displayName=s(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,a,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},k(E.prototype),E.prototype[u]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var u=new E(c(t,n,r,i),o);return e.isGeneratorFunction(n)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},k(x),s(x,a,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var u=this.tryEntries[o],a=u.completion;if("root"===u.tryLoc)return i("end");if(u.tryLoc<=this.prev){var s=r.call(u,"catchLoc"),c=r.call(u,"finallyLoc");if(s&&c){if(this.prev<u.catchLoc)return i(u.catchLoc,!0);if(this.prev<u.finallyLoc)return i(u.finallyLoc)}else if(s){if(this.prev<u.catchLoc)return i(u.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return i(u.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=e,u.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t){function n(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(c){return void n(c)}a.done?t(s):Promise.resolve(s).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var u=e.apply(t,r);function a(e){n(u,i,o,a,s,"next",e)}function s(e){n(u,i,o,a,s,"throw",e)}a(void 0)}))}}},function(e,t,n){var r=n(7);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,u=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw u}}}}},function(e,t,n){var r=n(25),i=n(26),o=n(7),u=n(27);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||u()}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=n(9);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){var r=n(6);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(10),i=n(11),o=n(31);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var u=r(this).constructor;n=Reflect.construct(i,arguments,u)}else n=i.apply(this,arguments);return o(this,n)}}},function(e,t,n){var r=n(32),i=n(33);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(37),i=n(38),o=n(7),u=n(39);e.exports=function(e){return r(e)||i(e)||o(e)||u()}},function(e,t,n){var r=n(12);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Dexie",(function(){return ir})),n.d(t,"RangeSet",(function(){return Jn})),n.d(t,"liveQuery",(function(){return sr})),n.d(t,"mergeRanges",(function(){return Xn})),n.d(t,"rangesOverlap",(function(){return Zn}));var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}var o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,u=Object.keys,a=Array.isArray;function s(e,t){return"object"!==typeof t||u(t).forEach((function(n){e[n]=t[n]})),e}"undefined"===typeof Promise||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,l={}.hasOwnProperty;function f(e,t){return l.call(e,t)}function h(e,t){"function"===typeof t&&(t=t(c(e))),("undefined"===typeof Reflect?u:Reflect.ownKeys)(t).forEach((function(n){d(e,n,t[n])}))}var p=Object.defineProperty;function d(e,t,n,r){p(e,t,s(n&&f(n,"get")&&"function"===typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function v(e){return{from:function(t){return e.prototype=Object.create(t.prototype),d(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor;function b(e,t){var n;return y(e,t)||(n=c(e))&&b(n,t)}var m=[].slice;function g(e,t,n){return m.call(e,t,n)}function w(e,t){return t(e)}function x(e){if(!e)throw new Error("Assertion Failed")}function k(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function E(e,t){return e.reduce((function(e,n,r){var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function S(e,t){if(f(e,t))return e[t];if(!t)return e;if("string"!==typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=S(e,t[r]);n.push(o)}return n}var u=t.indexOf(".");if(-1!==u){var a=e[t.substr(0,u)];return void 0===a?void 0:S(a,t.substr(u+1))}}function A(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!==typeof t&&"length"in t){x("string"!==typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)A(e,t[r],n[r])}else{var o=t.indexOf(".");if(-1!==o){var u=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?a(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var c=e[u];c||(c=e[u]={}),A(c,s,n)}}else void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)f(e,n)&&(t[n]=e[n]);return t}var O=[].concat;function I(e){return O.apply([],e)}var P="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(I([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return o[e]})),C=P.map((function(e){return o[e]}));E(P,(function(e){return[e,!0]}));var R=null;function j(e){R="undefined"!==typeof WeakMap&&new WeakMap;var t=N(e);return R=null,t}function N(e){if(!e||"object"!==typeof e)return e;var t=R&&R.get(e);if(t)return t;if(a(e)){t=[],R&&R.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(N(e[n]))}else if(C.indexOf(e.constructor)>=0)t=e;else{var i=c(e);for(var o in t=i===Object.prototype?{}:Object.create(i),R&&R.set(e,t),e)f(e,o)&&(t[o]=N(e[o]))}return t}var D={}.toString;function U(e){return D.call(e).slice(8,-1)}var B="undefined"!==typeof Symbol?Symbol.iterator:"@@iterator",L="symbol"===typeof B?function(e){var t;return null!=e&&(t=e[B])&&t.apply(e)}:function(){return null},K={};function M(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===K&&"string"===typeof e)return[e];if(i=L(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"===typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var F="undefined"!==typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},q="undefined"!==typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function W(e,t){q=e,Y=t}var Y=function(){return!0},V=!new Error("").stack;function H(){if(V)try{throw H.arguments,new Error}catch(e){return e}return new Error}function $(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(Y).map((function(e){return"\n"+e})).join("")):""}var z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(z),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Q(e,t){this._e=H(),this.name=e,this.message=t}function X(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function Z(e,t,n,r){this._e=H(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}function ee(e,t){this._e=H(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=X(e,t)}v(Q).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$(this._e,2))}},toString:function(){return this.name+": "+this.message}}),v(Z).from(Q),v(ee).from(Q);var te=G.reduce((function(e,t){return e[t]=t+"Error",e}),{}),ne=Q,re=G.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=H(),this.name=n,e?"string"===typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"===typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=J[t]||n,this.inner=null)}return v(r).from(ne),e[t]=r,e}),{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var ie=z.reduce((function(e,t){return e[t+"Error"]=re[t],e}),{});var oe=G.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=re[t]),e}),{});function ue(){}function ae(e){return e}function se(e,t){return null==e||e===ae?t:function(n){return t(e(n))}}function ce(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function le(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ce(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ce(i,this.onerror):i),void 0!==o?o:n}}function fe(e,t){return e===ue?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ce(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ce(r,this.onerror):r)}}function he(e,t){return e===ue?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ce(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ce(o,this.onerror):o),void 0===r?void 0===u?void 0:u:s(r,u)}}function pe(e,t){return e===ue?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);if(n&&"function"===typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}oe.ModifyError=Z,oe.DexieError=Q,oe.BulkError=ee;var ve={},ye="undefined"===typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"===typeof crypto||!crypto.subtle)return[e,c(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,c(t),e]}(),be=ye[0],me=ye[1],ge=ye[2],we=me&&me.then,_e=be&&be.constructor,xe=!!ge,ke=!1,Ee=ge?function(){ge.then($e)}:o.setImmediate?setImmediate.bind(null,$e):o.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){$e(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout($e,0)},Se=function(e,t){Ne.push([e,t]),Te&&(Ee(),Te=!1)},Ae=!0,Te=!0,Oe=[],Ie=[],Pe=null,Ce=ae,Re={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{mt(e[0],e[1])}catch(t){}}))}},je=Re,Ne=[],De=0,Ue=[];function Be(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ue,this._lib=!1;var t=this._PSD=je;if(q&&(this._stackHolder=H(),this._prev=null,this._numPrev=0),"function"!==typeof e){if(e!==ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fe(this,this._value))}this._state=null,this._value=null,++t.ref,Me(this,e)}var Le={get:function(){var e=je,t=rt;function n(n,r){var i=this,o=!e.global&&(e!==je||t!==rt),u=o&&!at(),a=new Be((function(t,a){We(i,new Ke(vt(n,e,o,u),vt(r,e,o,u),t,a,e))}));return q&&He(a,this),a}return n.prototype=ve,n},set:function(e){d(this,"then",e&&e.prototype===ve?Le:{get:function(){return e},set:Le.set})}};function Ke(e,t,n,r,i){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Me(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&"function"===typeof t.then?Me(e,(function(e,n){t instanceof Be?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,qe(e)),n&&Ge()}}),Fe.bind(null,e))}catch(n){Fe(e,n)}}function Fe(e,t){if(Ie.push(t),null===e._state){var n=e._lib&&ze();t=Ce(t),e._state=!1,e._value=t,q&&null!==t&&"object"===typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}((function(){var n=b(t,"stack");t._promise=e,d(t,"stack",{get:function(){return ke?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Oe.some((function(t){return t._value===e._value}))||Oe.push(e)}(e),qe(e),n&&Ge()}}function qe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)We(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===De&&(++De,Se((function(){0===--De&&Je()}),[]))}function We(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++De,Se(Ye,[n,e,t])}else e._listeners.push(t)}function Ye(e,t,n){try{Pe=t;var r,i=t._value;t._state?r=e(i):(Ie.length&&(Ie=[]),r=e(i),-1===Ie.indexOf(i)&&function(e){var t=Oe.length;for(;t;)if(Oe[--t]._value===e._value)return void Oe.splice(t,1)}(t)),n.resolve(r)}catch(o){n.reject(o)}finally{Pe=null,0===--De&&Je(),--n.psd.ref||n.psd.finalize()}}function Ve(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,o,u=e._value;null!=u?(i=u.name||"Error",o=u.message||u,r=$(u,0)):(i=u,o=""),t.push(i+(o?": "+o:"")+r)}return q&&((r=$(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ve(e._prev,t,n)),t}function He(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function $e(){ze()&&Ge()}function ze(){var e=Ae;return Ae=!1,Te=!1,e}function Ge(){var e,t,n;do{for(;Ne.length>0;)for(e=Ne,Ne=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(Ne.length>0);Ae=!0,Te=!0}function Je(){var e=Oe;Oe=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ue.slice(0),n=t.length;n;)t[--n]()}function Qe(e){return new Be(ve,!1,e)}function Xe(e,t){var n=je;return function(){var r=ze(),i=je;try{return ft(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{ft(i,!1),r&&Ge()}}}h(Be.prototype,{then:Le,_then:function(e,t){We(this,new Ke(null,null,e,t,je))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"===typeof t?this.then(null,(function(e){return e instanceof t?n(e):Qe(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Qe(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Qe(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{ke=!0;var e=Ve(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ke=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Be((function(r,i){var o=setTimeout((function(){return i(new re.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!==typeof Symbol&&Symbol.toStringTag&&d(Be.prototype,Symbol.toStringTag,"Dexie.Promise"),Re.env=ht(),h(Be,{all:function(){var e=M.apply(null,arguments).map(st);return new Be((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Be.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Be)return e;if(e&&"function"===typeof e.then)return new Be((function(t,n){e.then(t,n)}));var t=new Be(ve,!0,e);return He(t,Pe),t},reject:Qe,race:function(){var e=M.apply(null,arguments).map(st);return new Be((function(t,n){e.map((function(e){return Be.resolve(e).then(t,n)}))}))},PSD:{get:function(){return je},set:function(e){return je=e}},totalEchoes:{get:function(){return rt}},newPSD:ot,usePSD:pt,scheduler:{get:function(){return Se},set:function(e){Se=e}},rejectionMapper:{get:function(){return Ce},set:function(e){Ce=e}},follow:function(e,t){return new Be((function(n,r){return ot((function(t,n){var r=je;r.unhandleds=[],r.onunhandled=n,r.finalize=ce((function(){var e=this;!function(e){function t(){e(),Ue.splice(Ue.indexOf(t),1)}Ue.push(t),++De,Se((function(){0===--De&&Je()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),_e&&(_e.allSettled&&d(Be,"allSettled",(function(){var e=M.apply(null,arguments).map(st);return new Be((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Be.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),_e.any&&"undefined"!==typeof AggregateError&&d(Be,"any",(function(){var e=M.apply(null,arguments).map(st);return new Be((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Be.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var Ze={awaits:0,echoes:0,id:0},et=0,tt=[],nt=0,rt=0,it=0;function ot(e,t,n,r){var i=je,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++it;var u=Re.env;o.env=xe?{Promise:Be,PromiseProp:{value:Be,configurable:!0,writable:!0},all:Be.all,race:Be.race,allSettled:Be.allSettled,any:Be.any,resolve:Be.resolve,reject:Be.reject,nthen:yt(u.nthen,o),gthen:yt(u.gthen,o)}:{},t&&s(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=pt(o,e,n,r);return 0===o.ref&&o.finalize(),a}function ut(){return Ze.id||(Ze.id=++et),++Ze.awaits,Ze.echoes+=100,Ze.id}function at(){return!!Ze.awaits&&(0===--Ze.awaits&&(Ze.id=0),Ze.echoes=100*Ze.awaits,!0)}function st(e){return Ze.echoes&&e&&e.constructor===_e?(ut(),e.then((function(e){return at(),e}),(function(e){return at(),gt(e)}))):e}function ct(e){++rt,Ze.echoes&&0!==--Ze.echoes||(Ze.echoes=Ze.id=0),tt.push(je),ft(e,!0)}function lt(){var e=tt[tt.length-1];tt.pop(),ft(e,!1)}function ft(e,t){var n=je;if((t?!Ze.echoes||nt++&&e===je:!nt||--nt&&e===je)||dt(t?ct.bind(null,e):lt),e!==je&&(je=e,n===Re&&(Re.env=ht()),xe)){var r=Re.env.Promise,i=e.env;me.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(o,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ht(){var e=o.Promise;return xe?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:me.then,gthen:e.prototype.then}:{}}function pt(e,t,n,r,i){var o=je;try{return ft(e,!0),t(n,r,i)}finally{ft(o,!1)}}function dt(e){we.call(be,e)}function vt(e,t,n,r){return"function"!==typeof e?e:function(){var i=je;n&&ut(),ft(t,!0);try{return e.apply(this,arguments)}finally{ft(i,!1),r&&dt(at)}}}function yt(e,t){return function(n,r){return e.call(this,vt(n,t),vt(r,t))}}-1===(""+we).indexOf("[native code]")&&(ut=at=ue);var bt="unhandledrejection";function mt(e,t){var n;try{n=t.onuncatched(e)}catch(u){}if(!1!==n)try{var r,i={promise:t,reason:e};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(bt,!0,!0),s(r,i)):o.CustomEvent&&s(r=new CustomEvent(bt,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(_){}q&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(u){}}var gt=Be.reject;function wt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||je.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create()}catch(o){return gt(o)}return i._promise(t,(function(e,t){return ot((function(){return je.trans=i,r(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}if(e._state.openComplete)return gt(new re.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return gt(new re.DatabaseClosed);e.open().catch(ue)}return e._state.dbReadyPromise.then((function(){return wt(e,t,n,r)}))}var _t,xt="3.2.0-beta.2",kt=String.fromCharCode(65535),Et=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",At="String expected.",Tt=[],Ot="undefined"!==typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),It=Ot,Pt=Ot,Ct=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Rt="__dbnames",jt="readonly",Nt="readwrite";function Dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}try{_t={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(br){_t={indexedDB:null,IDBKeyRange:null}}var Ut=function(e){try{return e.only([[]]),Ut=function(){return[[]]},[[]]}catch(br){return Ut=function(){return kt},kt}},Bt={type:3,lower:-1/0,lowerOpen:!1,get upper(){return Ut(_t.IDBKeyRange)},upperOpen:!1};function Lt(e){return"string"!==typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=j(t))[e],t}}var Kt=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||je.trans,i=this.name;function o(e,n,r){if(!r.schema[i])throw new re.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var u=ze();try{return r&&r.db===this.db?r===je.trans?r._promise(e,o,n):ot((function(){return r._promise(e,o,n)}),{trans:r,transless:je.transless||je}):wt(this.db,e,[this.name],o)}finally{u&&Ge()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"===typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=u(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==kt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&q&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,i=this.db._deps.indexedDB;function o(e,t){try{return 0===i.cmp(e,t)}catch(br){return!1}}var s=t.reduce((function(t,n){var i=t[0],u=t[1],s=r[n],c=e[n];return[i||s,i||!s?Dt(u,s&&s.multi?function(e){var t=S(e,n);return a(t)&&t.some((function(e){return o(c,e)}))}:function(e){return o(c,S(e,n))}):u]}),[null,null]),c=s[0],l=s[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(f(t,r))try{n[r]=t[r]}catch(_){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){s(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,u=e;return o&&i&&(u=Lt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[u]})})).then((function(e){return e.numFailures?Be.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{A(e,o,t)}catch(_){}return t}))},e.prototype.update=function(e,t){if("object"!==typeof e||a(e))return this.where(":id").equals(e).modify(t);var n=S(e,this.schema.primKey.keyPath);if(void 0===n)return gt(new re.InvalidArgument("Given object does not contain its primary key"));try{"function"!==typeof t?u(t).forEach((function(n){A(e,n,t[n])})):t(e,{value:e,primKey:n})}catch($n){}return this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,u=e;return o&&i&&(u=Lt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[u],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Be.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{A(e,o,t)}catch(_){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Be.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Bt})})).then((function(e){return e.numFailures?Be.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,u=n.auto,a=n.keyPath;if(a&&i)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=a&&u?e.map(Lt(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,u=e.failures;if(0===t)return o?n:i;throw new ee(r.name+".bulkAdd(): "+t+" of "+s+" operations failed",u)}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,u=n.auto,a=n.keyPath;if(a&&i)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=a&&u?e.map(Lt(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult,u=e.failures;if(0===t)return o?n:i;throw new ee(r.name+".bulkPut(): "+t+" of "+s+" operations failed",u)}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new ee(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",o)}))},e}();function Mt(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return t[n].subscribe.apply(null,o),e}if("string"===typeof n)return t[n]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(e,r,i){if("object"===typeof e)return s(e);r||(r=pe),i||(i=ue);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(t){return t!==e})),o.fire=o.subscribers.reduce(r,i)}};return t[e]=n[e]=o,o}function s(e){u(e).forEach((function(t){var n=e[t];if(a(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new re.InvalidArgument("Invalid event config");var r=o(t,ae,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){k((function(){e.apply(null,t)}))}))}))}}))}}function Ft(e,t){return v(t).from({prototype:e}),t}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Wt(e,t){e.filter=Dt(e.filter,t)}function Yt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Dt(r(),t())}:t,e.justLimit=n&&!r}function Vt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new re.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ht(e,t,n){var r=Vt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function $t(e,t,n,r){var i=e.replayFilter?Dt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},u=function(e,n,r){if(!i||i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var u=n.primaryKey,a=""+u;"[object ArrayBuffer]"===a&&(a=""+new Uint8Array(u)),f(o,a)||(o[a]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(u,n),zt(Ht(e,r,n),e.algorithm,u,!e.keysOnly&&e.valueMapper)])}return zt(Ht(e,r,n),Dt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function zt(e,t,n,r){var i=Xe(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=ue}),(function(t){e.fail(t),n=ue}))||i(e.value,e,(function(e){return n=e})),n()}))}))}var Gt=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,gt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,gt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Dt(t.algorithm,e)},e.prototype._iterate=function(e,t){return $t(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return $t(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(qt(n,!0))return r.count({trans:e,query:{index:Vt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return $t(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var u="next"===this._ctx.dir?1:-1;function a(e,t){var n=o(e,i),r=o(t,i);return n<r?-u:n>r?u:0}return this.toArray((function(e){return e.sort(a)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&qt(n,!0)&&n.limit>0){var r=n.valueMapper,i=Vt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var o=[];return $t(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,qt(t)?Yt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Yt(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Yt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Wt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return Wt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Dt(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&qt(t,!0)&&t.limit>0)return this._read((function(e){var n=Vt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Wt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=f(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i;if("function"===typeof e)i=e;else{var o=u(e),a=o.length;i=function(t){for(var n=!1,r=0;r<a;++r){var i=o[r],u=e[i];S(t,i)!==u&&(A(t,i,u),n=!0)}return n}}var s=n.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,h=t.db._options.modifyChunkSize||200,p=t.db.core.cmp,d=[],v=0,y=[],b=function(e,t){var n=t.failures,r=t.numFailures;v+=e-r;for(var i=0,o=u(n);i<o.length;i++){var a=o[i];d.push(n[a])}};return t.clone().primaryKeys().then((function(t){return function o(u){var a=Math.min(h,t.length-u);return s.getMany({trans:r,keys:t.slice(u,u+a),cache:"immutable"}).then((function(c){for(var d=[],v=[],y=l?[]:null,m=[],g=0;g<a;++g){var w=c[g],_={value:j(w),primKey:t[u+g]};!1!==i.call(_,_.value,_)&&(null==_.value?m.push(t[u+g]):l||0===p(f(w),f(_.value))?(v.push(_.value),l&&y.push(t[u+g])):(m.push(t[u+g]),d.push(_.value)))}var x=qt(n)&&n.limit===1/0&&("function"!==typeof e||e===Jt)&&{index:n.index,range:n.range};return Promise.resolve(d.length>0&&s.mutate({trans:r,type:"add",values:d}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);b(d.length,e)}))).then((function(){return(v.length>0||x&&"object"===typeof e)&&s.mutate({trans:r,type:"put",keys:y,values:v,criteria:x,changeSpec:"function"!==typeof e&&e}).then((function(e){return b(v.length,e)}))})).then((function(){return(m.length>0||x&&e===Jt)&&s.mutate({trans:r,type:"delete",keys:m,criteria:x}).then((function(e){return b(m.length,e)}))})).then((function(){return t.length>u+a&&o(u+h)}))}))}(0).then((function(){if(d.length>0)throw new Z("Error modifying one or more objects",d,v,y);return t.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey&&!Pt||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify(Jt)},e}(),Jt=function(e,t){return t.value=null};function Qt(e,t){return e<t?-1:e===t?0:1}function Xt(e,t){return e>t?-1:e===t?0:1}function Zt(e,t,n){var r=e instanceof un?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function en(e){return new e.Collection(e,(function(){return on("")})).limit(0)}function tn(e,t,n,r,i,o){for(var u=Math.min(e.length,r.length),a=-1,s=0;s<u;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):a>=0?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[s],c)<0&&(a=s)}return u<r.length&&"next"===o?e+n.substr(e.length):u<e.length&&"prev"===o?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}function nn(e,t,n,r){var i,o,u,a,s,c,l,f=n.length;if(!n.every((function(e){return"string"===typeof e})))return Zt(e,At);function h(e){i=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),u="next"===e?Qt:Xt;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return u(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),s=t.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var p=new e.Collection(e,(function(){return rn(a[0],s[f-1]+r)}));p._ondirectionchange=function(e){h(e)};var d=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!==typeof i)return!1;var h=o(i);if(t(h,s,d))return!0;for(var p=null,v=d;v<f;++v){var y=tn(i,h,a[v],s[v],u,c);null===y&&null===p?d=v+1:(null===p||u(p,y)>0)&&(p=y)}return n(null!==p?function(){e.continue(p+l)}:r),!1})),p}function rn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function on(e){return{type:1,lower:e,upper:e}}var un=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?en(this):new this.Collection(this,(function(){return rn(e,t,!n,!r)}))}catch(br){return Zt(this,St)}},e.prototype.equals=function(e){return null==e?Zt(this,St):new this.Collection(this,(function(){return on(e)}))},e.prototype.above=function(e){return null==e?Zt(this,St):new this.Collection(this,(function(){return rn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Zt(this,St):new this.Collection(this,(function(){return rn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Zt(this,St):new this.Collection(this,(function(){return rn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Zt(this,St):new this.Collection(this,(function(){return rn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!==typeof e?Zt(this,At):this.between(e,e+kt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):nn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],kt)},e.prototype.equalsIgnoreCase=function(e){return nn(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=M.apply(K,arguments);return 0===e.length?en(this):nn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=M.apply(K,arguments);return 0===e.length?en(this):nn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,kt)},e.prototype.anyOf=function(){var e=this,t=M.apply(K,arguments),n=this._cmp;try{t.sort(n)}catch(br){return Zt(this,St)}if(0===t.length)return en(this);var r=new this.Collection(this,(function(){return rn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var u=e.key;n(u,t[i])>0;)if(++i===t.length)return r(o),!1;return 0===n(u,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Et,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=M.apply(K,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(br){return Zt(this,St)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Et,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,u=this._min,a=this._max;if(0===e.length)return en(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Zt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var s=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var l,f=i;function h(e,t){return f(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=u(o[0],t[0]),o[1]=a(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(h)}catch(m){return Zt(this,St)}var p=0,d=c?function(e){return i(e,l[p][1])>0}:function(e){return i(e,l[p][1])>=0},v=s?function(e){return o(e,l[p][0])>0}:function(e){return o(e,l[p][0])>=0};var y=d,b=new this.Collection(this,(function(){return rn(l[0][0],l[l.length-1][1],!s,!c)}));return b._ondirectionchange=function(e){"next"===e?(y=d,f=i):(y=v,f=o),l.sort(h)},b._addAlgorithm((function(e,t,r){for(var o=e.key;y(o);)if(++p===l.length)return t(r),!1;return!!function(e){return!d(e)&&!v(e)}(o)||(0===n._cmp(o,l[p][1])||0===n._cmp(o,l[p][0])||t((function(){f===i?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),b},e.prototype.startsWithAnyOf=function(){var e=M.apply(K,arguments);return e.every((function(e){return"string"===typeof e}))?0===e.length?en(this):this.inAnyRange(e.map((function(e){return[e,e+kt]}))):Zt(this,"startsWithAnyOf() only works with strings")},e}();function an(e){return Xe((function(t){return sn(t),e(t.target.error),!1}))}function sn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var cn=Mt(null,"txcommitted"),ln=function(){function e(){}return e.prototype._lock=function(){return x(!je.global),++this._reculock,1!==this._reculock||je.global||(je.lockOwnerFor=this),this},e.prototype._unlock=function(){if(x(!je.global),0===--this._reculock)for(je.global||(je.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{pt(e[1],e[0])}catch(br){}}return this},e.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(x(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new re.DatabaseClosed(r);case"MissingAPIError":throw new re.MissingAPI(r.message,r);default:throw new re.OpenFailed(r)}if(!this.active)throw new re.TransactionInactive;return x(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode):n.transaction(this.storeNames,this.mode))).onerror=Xe((function(n){sn(n),t._reject(e.error)})),e.onabort=Xe((function(n){sn(n),t.active&&t._reject(new re.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Xe((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&cn.txcommitted.fire(e.mutatedParts)})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return gt(new re.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new re.TransactionInactive);if(this._locked())return new Be((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},je])}));if(n)return ot((function(){var e=new Be((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Be((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Be.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Be((function(e,r){n.then((function(n){return t._waitingQueue.push(Xe(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(Xe(r.bind(null,e)))})).finally((function(){t._waitingFor===i&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(f(t,e))return t[e];var n=this.schema[e];if(!n)throw new re.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function fn(e,t,n,r,i,o,u){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!u?"&":"")+(r?"*":"")+(i?"++":"")+hn(t)}}function hn(e){return"string"===typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function pn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:E(n,(function(e){return[e.name,e]}))}}function dn(e){return null==e?function(){}:"string"===typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return S(t,e)}}(e):function(t){return S(t,e)}}function vn(e){return[].slice.call(e)}var yn=0;function bn(e){return null==e?":id":"string"===typeof e?e:"["+e.join("+")+"]"}function mn(e,t,n,r){var i=t.cmp.bind(t);function o(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}var u=function(e,t){var n=vn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),i=null==t,o={},u={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:dn(t)},indexes:vn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,i=e.keyPath,u={name:t,compound:a(i),keyPath:i,unique:n,multiEntry:r,extractKey:dn(i)};return o[bn(i)]=u,u})),getIndexByKeyPath:function(e){return o[bn(e)]}};return o[":id"]=u.primaryKey,null!=t&&(o[bn(t)]=u.primaryKey),u}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),s=u.schema,c=u.hasGetAll,l=s.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,r=e.type,i=e.keys,u=e.values,a=e.range;return new Promise((function(e,s){e=Xe(e);var c=n.objectStore(t),l=null==c.keyPath,f="put"===r||"add"===r;if(!f&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,p=(i||u||{length:1}).length;if(i&&u&&i.length!==u.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var d=[],v=[],y=0,b=function(e){++y,sn(e)};if("deleteRange"===r){if(4===a.type)return e({numFailures:y,failures:v,results:[],lastResult:void 0});3===a.type?d.push(h=c.clear()):d.push(h=c.delete(o(a)))}else{var m=f?l?[u,i]:[u,null]:[i,null],g=m[0],w=m[1];if(f)for(var _=0;_<p;++_)d.push(h=w&&void 0!==w[_]?c[r](g[_],w[_]):c[r](g[_])),h.onerror=b;else for(_=0;_<p;++_)d.push(h=c[r](g[_])),h.onerror=b}var x=function(t){var n=t.target.result;d.forEach((function(e,t){return null!=e.error&&(v[t]=e.error)})),e({numFailures:y,failures:v,results:"delete"===r?i:d.map((function(e){return e.result})),lastResult:n})};h.onerror=function(e){b(e),x(e)},h.onsuccess=x}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,i){e=Xe(e);for(var o,u=n.objectStore(t),a=r.length,s=new Array(a),c=0,l=0,f=function(t){var n=t.target;s[n._pos]=n.result,++l===c&&e(s)},h=an(i),p=0;p<a;++p)null!=r[p]&&((o=u.get(r[p]))._pos=p,o.onsuccess=f,o.onerror=h,++c);0===c&&e(s)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,i){e=Xe(e);var o=n.objectStore(t).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=an(i)}))},query:function(e){return function(n){return new Promise((function(r,i){r=Xe(r);var u=n.trans,a=n.values,s=n.limit,c=n.query,l=s===1/0?void 0:s,f=c.index,h=c.range,p=u.objectStore(t),d=f.isPrimaryKey?p:p.index(f.name),v=o(h);if(0===s)return r({result:[]});if(e){var y=a?d.getAll(v,l):d.getAllKeys(v,l);y.onsuccess=function(e){return r({result:e.target.result})},y.onerror=an(i)}else{var b=0,m=a||!("openKeyCursor"in d)?d.openCursor(v):d.openKeyCursor(v),g=[];m.onsuccess=function(e){var t=m.result;return t?(g.push(a?t.value:t.primaryKey),++b===s?r({result:g}):void t.continue()):r({result:g})},m.onerror=an(i)}}))}}(c),openCursor:function(e){var n=e.trans,r=e.values,i=e.query,u=e.reverse,a=e.unique;return new Promise((function(e,s){e=Xe(e);var c=i.index,l=i.range,f=n.objectStore(t),h=c.isPrimaryKey?f:f.index(c.name),p=u?a?"prevunique":"prev":a?"nextunique":"next",d=r||!("openKeyCursor"in h)?h.openCursor(o(l),p):h.openKeyCursor(o(l),p);d.onerror=an(s),d.onsuccess=Xe((function(t){var r=d.result;if(r){r.___id=++yn,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var u=r.advance.bind(r),a=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Xe(s),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=Xe(e),d.onerror=an(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=a,e(t)}})),n=function(){if(d.result)try{e()}catch(t){r.fail(t)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return d.onsuccess=Xe((function(e){d.onsuccess=n,n()})),r.continue=i,r.continuePrimaryKey=o,r.advance=u,n(),t},e(r)}else e(null)}),s)}))},count:function(e){var n=e.query,r=e.trans,i=n.index,u=n.range;return new Promise((function(e,n){var a=r.objectStore(t),s=i.isPrimaryKey?a:a.index(i.name),c=o(u),l=c?s.count(c):s.count();l.onsuccess=Xe((function(t){return e(t.target.result)})),l.onerror=an(n)}))}}}(e)})),f={};return l.forEach((function(e){return f[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!f[e])throw new Error("Table '"+e+"' not found");return f[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:Ut(n),schema:s}}function gn(e,t,n,i){var o=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return r(r({},e),n(e))}),e)}(mn(t,n.indexedDB,o,i),e.dbcore)}}function wn(e,t){var n=e._novip,r=t.db,i=gn(n._middlewares,r,n._deps,t);n.core=i.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function _n(e,t,n,r){var i=e._novip;n.forEach((function(e){var n=r[e];t.forEach((function(t){var r=b(t,e);(!r||"value"in r&&void 0===r.value)&&(t===i.Transaction.prototype||t instanceof i.Transaction?d(t,e,{get:function(){return this.table(e)},set:function(t){p(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new i.Table(e,n))}))}))}function xn(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function kn(e,t){return e._cfg.version-t._cfg.version}function En(e,t,n,r){var i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),s=je.transless||je;ot((function(){je.trans=o,je.transless=s,0===t?(u(i).forEach((function(e){An(n,e,i[e].primKey,i[e].indexes)})),wn(e,n),Be.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,r){var i=e._novip,o=[],a=i._versions,s=i._dbSchema=On(i,i.idbdb,r),c=!1;function l(){return o.length?Be.resolve(o.shift()(n.idbtrans)).then(l):Be.resolve()}return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=s,a=e._cfg.dbschema;In(i,o,r),In(i,a,r),s=i._dbSchema=a;var l=Sn(o,a);l.add.forEach((function(e){An(r,e[0],e[1].primKey,e[1].indexes)})),l.change.forEach((function(e){if(e.recreate)throw new re.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Tn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Tn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var f=e._cfg.contentUpgrade;if(f&&e._cfg.version>t){wn(i,r),n._memoizedTables={},c=!0;var h=T(a);l.del.forEach((function(e){h[e]=o[e]})),xn(i,[i.Transaction.prototype]),_n(i,[i.Transaction.prototype],u(h),h),n.schema=h;var p,d=F(f);d&&ut();var v=Be.follow((function(){if((p=f(n))&&d){var e=at.bind(null,null);p.then(e,e)}}));return p&&"function"===typeof p.then?Be.resolve(p):v.then((function(){return p}))}})),o.push((function(t){c&&It||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(e._cfg.dbschema,t);xn(i,[i.Transaction.prototype]),_n(i,[i.Transaction.prototype],i._storeNames,i._dbSchema),n.schema=i._dbSchema}))})),l().then((function(){var e,t;t=r,u(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||An(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function Sn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var u={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Ot)u.recreate=!0,r.change.push(u);else{var a=i.idxByName,s=o.idxByName,c=void 0;for(c in a)s[c]||u.del.push(c);for(c in s){var l=a[c],f=s[c];l?l.src!==f.src&&u.change.push(f):u.add.push(f)}(u.del.length>0||u.add.length>0||u.change.length>0)&&r.change.push(u)}}else r.add.push([n,o])}return r}function An(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Tn(i,e)})),i}function Tn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function On(e,t,n){var r={};return g(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=t.keyPath,o=fn(hn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!==typeof i,!0),u=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);i=s.keyPath;var c=fn(s.name,i,!!s.unique,!!s.multiEntry,!1,i&&"string"!==typeof i,!1);u.push(c)}r[e]=pn(e,o,u)})),r}function In(e,t,n){for(var r=e._novip,i=n.db.objectStoreNames,u=0;u<i.length;++u){var a=i[u],s=n.objectStore(a);r._hasGetAll="getAll"in s;for(var c=0;c<s.indexNames.length;++c){var l=s.indexNames[c],f=s.index(l).keyPath,h="string"===typeof f?f:"["+g(f).join("+")+"]";if(t[a]){var p=t[a].idxByName[h];p&&(p.name=l,delete t[a].idxByName[h],t[a].idxByName[l]=p)}}}"undefined"!==typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}var Pn=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){u(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return fn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})),i=r.shift();if(i.multi)throw new re.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")})),t[n]=pn(n,i,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var n=t._versions,r={},i={};return n.forEach((function(e){s(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),t._dbSchema=i,xn(t,[t._allTables,t,t.Transaction.prototype]),_n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],u(i),i),t._storeNames=u(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||ue,e),this},e}();function Cn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ir(Rt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Rn(e){return e&&"function"===typeof e.databases}function jn(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Rn(n)&&t!==Rt&&Cn(n,r).delete(t).catch(ue)}function Nn(e){return ot((function(){return je.letThrough=!0,e()}))}function Dn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Un(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?gt(t.dbOpenError):e}));q&&(t.openCanceller._stackHolder=H()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new re.DatabaseClosed("db.open() was cancelled")}var o=t.dbReadyResolve,a=null,s=!1;return Be.race([r,Dn().then((function(){return new Be((function(r,o){if(i(),!n)throw new re.MissingAPI;var c=e.name,l=t.autoSchema?n.open(c):n.open(c,Math.round(10*e.verno));if(!l)throw new re.MissingAPI;l.onerror=an(o),l.onblocked=Xe(e._fireOnBlocked),l.onupgradeneeded=Xe((function(r){if(a=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=sn,a.abort(),l.result.close();var i=n.deleteDatabase(c);i.onsuccess=i.onerror=Xe((function(){o(new re.NoSuchDatabase("Database "+c+" doesnt exist"))}))}else{a.onerror=an(o);var u=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;s=u<1,e._novip.idbdb=l.result,En(e,u/10,a,o)}}),o),l.onsuccess=Xe((function(){a=null;var n,i=e._novip.idbdb=l.result,o=g(i.objectStoreNames);if(o.length>0)try{var f=i.transaction(1===(n=o).length?n[0]:n,"readonly");t.autoSchema?function(e,t,n){var r=e._novip;r.verno=t.version/10;var i=r._dbSchema=On(0,t,n);r._storeNames=g(t.objectStoreNames,0),_n(r,[r._allTables],u(i),i)}(e,i,f):(In(e,e._dbSchema,f),function(e,t){var n=Sn(On(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,f)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wn(e,f)}catch(br){}Tt.push(e),i.onversionchange=Xe((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),i.onclose=Xe((function(t){e.on("close").fire(t)})),s&&function(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!Rn(n)&&t!==Rt&&Cn(n,r).put({name:t}).catch(ue)}(e._deps,c),r()}),o)}))}))]).then((function(){return i(),t.onReadyBeingFired=[],Be.resolve(Nn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(de,ue);return t.onReadyBeingFired=[],Be.resolve(Nn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((function(){return e})).catch((function(n){t.dbOpenError=n;try{a&&a.abort()}catch($n){}return r===t.openCanceller&&e._close(),gt(n)})).finally((function(){t.openComplete=!0,o()}))}function Bn(e){var t=function(t){return e.next(t)},n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t),o=i.value;return i.done?o:o&&"function"===typeof o.then?o.then(n,r):a(o)?Promise.all(o).then(n,r):n(o)}}return i(t)()}function Ln(e,t,n){var r=arguments.length;if(r<2)throw new re.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=I(i);return[e,o,n]}function Kn(e,t,n,r,i){return Be.resolve().then((function(){var o=je.transless||je,u=e._createTransaction(t,n,e._dbSchema,r),a={trans:u,transless:o};r?u.idbtrans=r.idbtrans:u.create();var s,c=F(i);c&&ut();var l=Be.follow((function(){if(s=i.call(u,u))if(c){var e=at.bind(null,null);s.then(e,e)}else"function"===typeof s.next&&"function"===typeof s.throw&&(s=Bn(s))}),a);return(s&&"function"===typeof s.then?Be.resolve(s).then((function(e){return u.active?e:gt(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&u._resolve(),u._completion.then((function(){return e}))})).catch((function(e){return u._reject(e),gt(e)}))}))}function Mn(e,t,n){for(var r=a(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),i=n.schema,o={},u=[];function a(e,t,n){var i=bn(e),s=o[i]=o[i]||[],c=null==e?0:"string"===typeof e?1:e.length,l=t>0,f=r(r({},n),{isVirtual:l,keyTail:t,keyLength:c,extractKey:dn(e),unique:!l&&n.unique});(s.push(f),f.isPrimaryKey||u.push(f),c>1)&&a(2===c?e[0]:e.slice(0,c-1),t+1,n);return s.sort((function(e,t){return e.keyTail-t.keyTail})),f}var s=a(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[s];for(var c=0,l=i.indexes;c<l.length;c++){var f=l[c];a(f.keyPath,0,f)}function h(t){var n,i,o=t.query.index;return o.isVirtual?r(r({},t),{query:{index:o,range:(n=t.query.range,i=o.keyTail,{type:1===n.type?2:n.type,lower:Mn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Mn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t}return r(r({},n),{schema:r(r({},i),{primaryKey:s,indexes:u,getIndexByKeyPath:function(e){var t=o[bn(e)];return t&&t[0]}}),count:function(e){return n.count(h(e))},query:function(e){return n.query(h(e))},openCursor:function(t){var r=t.query.index,i=r.keyTail,o=r.isVirtual,u=r.keyLength;if(!o)return n.openCursor(t);return n.openCursor(h(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Mn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,u).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Mn(t,e.MAX_KEY,i),r)}},key:{get:function(){var e=n.key;return 1===u?e[0]:e.slice(0,u)}},value:{get:function(){return n.value}}})}(n)}))}})}})}};function qn(e,t,n,r){return n=n||{},r=r||"",u(e).forEach((function(i){if(f(t,i)){var o=e[i],u=t[i];if("object"===typeof o&&"object"===typeof u&&o&&u){var a=U(o);a!==U(u)?n[r+i]=t[i]:"Object"===a?qn(o,u,n,r+i+"."):o!==u&&(n[r+i]=t[i])}else o!==u&&(n[r+i]=t[i])}else n[r+i]=void 0})),u(t).forEach((function(i){f(e,i)||(n[r+i]=t[i])})),n}var Wn,Yn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema.primaryKey;return r(r({},n),{mutate:function(e){var u=je.trans,a=u.table(t).hook,s=a.deleting,c=a.creating,l=a.updating;switch(e.type){case"add":if(c.fire===ue)break;return u._promise("readwrite",(function(){return h(e)}),!0);case"put":if(c.fire===ue&&l.fire===ue)break;return u._promise("readwrite",(function(){return h(e)}),!0);case"delete":if(s.fire===ue)break;return u._promise("readwrite",(function(){return h(e)}),!0);case"deleteRange":if(s.fire===ue)break;return u._promise("readwrite",(function(){return function(e){return p(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function h(e){var t=je.trans,u=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(o,e);if(!u)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:u}):r({},e)).type&&(e.values=i([],e.values)),e.keys&&(e.keys=i([],e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,u).then((function(r){var i=u.map((function(n,i){var u=r[i],a={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(a,n,u,t);else if("add"===e.type||void 0===u){var h=c.fire.call(a,n,e.values[i],t);null==n&&null!=h&&(n=h,e.keys[i]=n,o.outbound||A(e.values[i],o.keyPath,n))}else{var p=qn(u,e.values[i]),d=l.fire.call(a,p,n,u,t);if(d){var v=e.values[i];Object.keys(d).forEach((function(e){f(v,e)?v[e]=d[e]:A(v,e,d[e])}))}}return a}));return n.mutate(e).then((function(t){for(var n=t.failures,o=t.results,a=t.numFailures,s=t.lastResult,c=0;c<u.length;++c){var l=o?o[c]:u[c],f=i[c];null==l?f.onerror&&f.onerror(n[c]):f.onsuccess&&f.onsuccess("put"===e.type&&r[c]?e.values[c]:l)}return{failures:n,results:o,numFailures:a,lastResult:s}})).catch((function(e){return i.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function p(e,t,i){return n.query({trans:e,values:!1,query:{index:o,range:t},limit:i}).then((function(n){var o=n.result;return h({type:"delete",keys:o,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):o.length<i?{failures:[],numFailures:0,lastResult:void 0}:p(e,r(r({},t),{lower:o[o.length-1],lowerOpen:!0}),i)}))}))}}})}})}};function Vn(e,t){if(Wn)return Wn(e,t);var n=_t.indexedDB;if(!n)throw new re.MissingAPI;return(Wn=function(e,t){try{return null==e||null==t?NaN:n.cmp(e,t)}catch($n){return NaN}})(e,t)}function Hn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===Vn(t.keys[i],e[o])&&(r.push(n?j(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch($n){return null}}var $n,zn={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Hn(e.keys,e.trans._cache,"clone"===e.cache);return t?Be.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?j(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Gn(e){return!("from"in e)}var Jn=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&s(r,t),r}s(this,arguments.length?{d:1,from:t,to:arguments.length>1?n:t}:{d:0})};function Qn(e,t,n){var r=Vn(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Gn(e))return s(e,{from:t,to:n,d:1});var i=e.l,o=e.r;if(Vn(n,e.from)<0)return i?Qn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},tr(e);if(Vn(t,e.to)>0)return o?Qn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},tr(e);Vn(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Vn(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var u=!e.r;i&&!e.l&&Xn(e,i),o&&u&&Xn(e,o)}}function Xn(e,t){Gn(t)||function e(t,n){var r=n.from,i=n.to,o=n.l,u=n.r;Qn(t,r,i),o&&e(t,o),u&&e(t,u)}(e,t)}function Zn(e,t){var n=er(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=er(e),u=o.next(i.from),a=u.value;!r.done&&!u.done;){if(Vn(a.from,i.to)<=0&&Vn(a.to,i.from)>=0)return!0;Vn(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(u=o.next(i.from)).value}return!1}function er(e){var t=Gn(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Vn(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Vn(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function tr(e){var t,n,i=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var u="r"===o?"l":"r",a=r({},e),s=e[o];e.from=s.from,e.to=s.to,e[o]=s[o],a[o]=s[u],e[u]=a,a.d=nr(a)}e.d=nr(e)}function nr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}h(Jn.prototype,(($n={add:function(e){return Xn(this,e),this},addKey:function(e){return Qn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return Qn(t,e,e)})),this}})[B]=function(){return er(this)},$n));var rr={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new Jn(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{table:function(i){var o=e.table(i),s=o.schema,c=s.primaryKey,l=c.extractKey,f=c.outbound,h=r(r({},o),{mutate:function(e){var r=e.trans,u=r.mutatedParts||(r.mutatedParts={}),c=function(e){var n="idb://"+t+"/"+i+"/"+e;return u[n]||(u[n]=new Jn)},l=c(""),f=c(":dels"),h=e.type,p="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],d=p[0],v=p[1],y=e.trans._cache;return o.mutate(e).then((function(e){if(a(d)){"delete"!==h&&(d=e.results),l.addKeys(d);var t=Hn(d,y);t||"add"===h||f.addKeys(d),(t||v)&&function(e,t,n,r){function i(t){var i=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var u=function(e){return t.multiEntry&&a(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(n||r).forEach((function(e,t){var i=n&&o(n[t]),a=r&&o(r[t]);0!==Vn(i,a)&&(null!=i&&u(i),null!=a&&u(a))}))}t.indexes.forEach(i)}(c,s,t,v)}else if(d){var r={from:d.lower,to:d.upper};f.add(r),l.add(r)}else l.add(n),f.add(n),s.indexes.forEach((function(e){return c(e.name).add(n)}));return e}))}}),p=function(t){var n,r,i=t.query,o=i.index,u=i.range;return[o,new Jn(null!==(n=u.lower)&&void 0!==n?n:e.MIN_KEY,null!==(r=u.upper)&&void 0!==r?r:e.MAX_KEY)]},d={get:function(e){return[c,new Jn(e.key)]},getMany:function(e){return[c,(new Jn).addKeys(e.keys)]},count:p,query:p,openCursor:p};return u(d).forEach((function(e){h[e]=function(u){var a=je.subscr;if(a){var s=function(e){var n="idb://"+t+"/"+i+"/"+e;return a[n]||(a[n]=new Jn)},c=s(""),h=s(":dels"),p=d[e](u),v=p[0],y=p[1];if(s(v.name||"").add(y),!v.isPrimaryKey){if("count"!==e){var b="query"===e&&f&&u.values&&o.query(r(r({},u),{values:!1}));return o[e].apply(this,arguments).then((function(t){if("query"===e){if(f&&u.values)return b.then((function(e){var n=e.result;return c.addKeys(n),t}));var n=u.values?t.result.map(l):t.result;u.values?c.addKeys(n):h.addKeys(n)}else if("openCursor"===e){var r=t,i=u.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return i&&c.addKey(r.primaryKey),r.value}}})}return t}))}h.add(n)}}return o[e].apply(this,arguments)}})),h}})}};var ir=function(){function e(t,n){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var u=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0};s.dbReadyPromise=new Be((function(e){s.dbReadyResolve=e})),s.openCanceller=new Be((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=Mt(this,"populate","blocked","versionchange","close",{ready:[de,ue]}),this.on.ready.subscribe=w(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=i._state;if(e.openComplete)e.dbOpenError||Be.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,Ft(Gt.prototype,(function(e,t){this.db=a;var n=Bt,r=null;if(t)try{n=t()}catch(s){r=s}var i=e._ctx,o=i.table,u=o.hook.reading.fire;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:u!==ae?u:null}}))),this.Table=function(e){return Ft(Kt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Mt(null,{creating:[le,ue],reading:[se,ae],updating:[he,ue],deleting:[fe,ue]})}))}(this),this.Transaction=function(e){return Ft(ln.prototype,(function(t,n,r,i){var o=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Mt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Be((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),gt(e)}))}))}(this),this.Version=function(e){return Ft(Pn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Ft(un.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var i=e._deps.indexedDB;if(!i)throw new re.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(e,t){return i.cmp(t,e)},this._max=function(e,t){return i.cmp(e,t)>0?e:t},this._min=function(e,t){return i.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Ut(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),Tt.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Fn),this.use(Yn),this.use(rr),this.use(zn),this.vip=Object.create(this,{_vip:{value:!0}}),u.forEach((function(e){return e(i)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new re.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(kn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?e():new Be((function(e,n){if(t._state.openComplete)return n(new re.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new re.DatabaseClosed);t.open().catch(ue)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;i&&this.unuse({stack:t,name:i});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==r?10:r,name:i}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return Un(this)},e.prototype._close=function(){var e=this._state,t=Tt.indexOf(this);if(t>=0&&Tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(br){}this._novip.idbdb=null}e.dbReadyPromise=new Be((function(t){e.dbReadyResolve=t})),e.openCanceller=new Be((function(t,n){e.cancelOpen=n}))},e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new re.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Be((function(r,i){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Xe((function(){jn(e._deps,e.name),r()})),t.onerror=an(i),t.onblocked=e._fireOnBlocked};if(t)throw new re.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return u(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Ln.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,i=je.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,u,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(u=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!==typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===jt)o=jt;else{if("rw"!=e&&e!=Nt)throw new re.InvalidArgument("Invalid transaction mode: "+e);o=Nt}if(i){if(i.mode===jt&&o===Nt){if(!a)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&u.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new re.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(br){return i?i._promise(null,(function(t,n){n(br)})):gt(br)}var s=Kn.bind(null,this,o,u,i,n);return i?i._promise(o,s,"lock"):je.trans?pt(je.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!f(this._allTables,e))throw new re.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),or="undefined"!==typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ur=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!==typeof e?e:{next:e,error:t,complete:n})},e.prototype[or]=function(){return this},e}();function ar(e,t){return u(t).forEach((function(n){Xn(e[n]||(e[n]=new Jn),t[n])})),e}function sr(e){return new ur((function(t){var n=F(e);var r=!1,i={},o={},a={get closed(){return r},unsubscribe:function(){r=!0,cn.txcommitted.unsubscribe(f)}};t.start&&t.start(a);var s=!1,c=!1;function l(){return u(o).some((function(e){return i[e]&&Zn(i[e],o[e])}))}var f=function(e){ar(i,e),l()&&h()},h=function u(){if(!s&&!r){i={};var h={},p=function(t){n&&ut();var r=function(){return ot(e,{subscr:t,trans:null})},i=je.trans?pt(je.transless,r):r();return n&&i.then(at,at),i}(h);c||(cn("txcommitted",f),c=!0),s=!0,Promise.resolve(p).then((function(e){s=!1,r||(l()?u():(i={},o=h,t.next&&t.next(e)))}),(function(e){s=!1,t.error&&t.error(e),a.unsubscribe()}))}};return h(),a}))}var cr=ir;function lr(e){var t=hr;try{hr=!0,cn.txcommitted.fire(e)}finally{hr=t}}h(cr,r(r({},oe),{delete:function(e){return new cr(e,{addons:[]}).delete()},exists:function(e){return new cr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return Rn(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Rt}))})):Cn(t,n).toCollection().primaryKeys()}(cr.dependencies).then(e)}catch($n){return gt(new re.MissingAPI)}},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return je.trans?pt(je.transless,e):e()},vip:Nn,async:function(e){return function(){try{var t=Bn(e.apply(this,arguments));return t&&"function"===typeof t.then?t:Be.resolve(t)}catch(br){return gt(br)}}},spawn:function(e,t,n){try{var r=Bn(e.apply(n,t||[]));return r&&"function"===typeof r.then?r:Be.resolve(r)}catch(br){return gt(br)}},currentTransaction:{get:function(){return je.trans||null}},waitFor:function(e,t){var n=Be.resolve("function"===typeof e?cr.ignoreTransaction(e):e).timeout(t||6e4);return je.trans?je.trans.waitFor(n):n},Promise:Be,debug:{get:function(){return q},set:function(e){W(e,"dexie"===e?function(){return!0}:Ct)}},derive:v,extend:s,props:h,override:w,Events:Mt,on:cn,liveQuery:sr,extendObservabilitySet:ar,getByKeyPath:S,setByKeyPath:A,delByKeyPath:function(e,t){"string"===typeof t?A(e,t,void 0):"length"in t&&[].map.call(t,(function(t){A(e,t,void 0)}))},shallowClone:T,deepClone:j,getObjectDiff:qn,asap:k,minKey:Et,addons:[],connections:Tt,errnames:te,dependencies:_t,semVer:xt,version:xt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),cr.maxKey=Ut(cr.dependencies.IDBKeyRange);var fr=lr,hr=!1,pr={};if("undefined"!==typeof document&&document.addEventListener){var dr=function(){"visible"===document.visibilityState&&(Object.keys(pr).length>0&&lr(pr),pr={})};document.addEventListener("visibilitychange",dr),fr=function(e){ar(pr,e),dr()}}if("undefined"!==typeof BroadcastChannel){var vr=new BroadcastChannel("dexie-txcommitted");cn("txcommitted",(function(e){hr||vr.postMessage(e)})),vr.onmessage=function(e){e.data&&fr(e.data)}}else if("undefined"!==typeof self&&"undefined"!==typeof navigator){cn("txcommitted",(function(e){try{hr||("undefined"!==typeof localStorage&&localStorage.setItem("dexie-txcommitted",JSON.stringify({trig:Math.random(),changedParts:e})),"object"===typeof self.clients&&i([],self.clients.matchAll({includeUncontrolled:!0})).forEach((function(t){return t.postMessage({type:"dexie-txcommitted",changedParts:e})})))}catch($n){}})),addEventListener("storage",(function(e){if("dexie-txcommitted"===e.key){var t=JSON.parse(e.newValue);t&&fr(t.changedParts)}}));var yr=self.document&&navigator.serviceWorker;yr&&yr.addEventListener("message",(function(e){var t=e.data;t&&"dexie-txcommitted"===t.type&&fr(t.changedParts)}))}Be.rejectionMapper=function(e,t){if(!e||e instanceof Q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ie[e.name])return e;var n=new ie[e.name](t||e.message,e);return"stack"in e&&d(n,"stack",{get:function(){return this.inner.stack}}),n},W(q,Ct),t.default=ir},function(e,t,n){"use strict";n.r(t);n(13);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(1);function u(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,u=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw u}}}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){var t=f();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function v(e,t,n){return(v=f()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function y(e){var t="function"===typeof Map?new Map:void 0;return(y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return v(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}var b=function(e){for(var t=e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.length>0&&(t+=" :: ".concat(JSON.stringify(r))),t},m=function(e){c(n,e);var t=d(n);function n(e,r){var i;a(this,n);var o=b(e,r);return(i=t.call(this,o)).name=e,i.details=r,i}return n}(y(Error)),g=new Set;function w(e){g.add(e)}var _={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:"undefined"!==typeof registration?registration.scope:""},x=function(e){return[_.prefix,e,_.suffix].filter((function(e){return e&&e.length>0})).join("-")},k=function(e){return e||x(_.precache)},E=function(e){return e||x(_.runtime)},S=n(0),A=n.n(S);function T(e,t,n,r,i,o,u){try{var a=e[o](u),s=a.value}catch(c){return void n(c)}a.done?t(s):Promise.resolve(s).then(r,i)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function u(e){T(o,r,i,u,a,"next",e)}function a(e){T(o,r,i,u,a,"throw",e)}u(void 0)}))}}function I(){return P.apply(this,arguments)}function P(){return(P=O(A.a.mark((function e(){var t,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0,t=u(g),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=11;break}return r=n.value,e.next=8,r();case 8:0;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:0;case 20:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})))).apply(this,arguments)}var C,R=function(e){return new URL(String(e),location.href).href.replace(new RegExp("^".concat(location.origin)),"")},j=function(e,t){return e.filter((function(e){return t in e}))},N=function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.request,r=t.mode,i=t.plugins,o=j(void 0===i?[]:i,"cacheKeyWillBeUsed"),a=n,s=u(o),e.prev=4,s.s();case 6:if((c=s.n()).done){e.next=15;break}return l=c.value,e.next=10,l.cacheKeyWillBeUsed.call(l,{mode:r,request:a});case 10:"string"===typeof(a=e.sent)&&(a=new Request(a));case 13:e.next=6;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),s.e(e.t0);case 20:return e.prev=20,s.f(),e.finish(20);case 23:return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l,f,h;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.request,r=t.response,i=t.event,o=t.plugins,a=r,s=!1,c=u(void 0===o?[]:o),e.prev=4,c.s();case 6:if((l=c.n()).done){e.next=19;break}if(!("cacheWillUpdate"in(f=l.value))){e.next=17;break}return s=!0,h=f.cacheWillUpdate,e.next=13,h.call(f,{request:n,response:a,event:i});case 13:if(a=e.sent){e.next=17;break}return e.abrupt("break",19);case 17:e.next=6;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(4),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return s||(a=a&&200===a.status?a:void 0),e.abrupt("return",a||null);case 29:case"end":return e.stop()}}),e,null,[[4,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l,f,h,p,d,v;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cacheName,r=t.request,i=t.event,o=t.matchOptions,a=t.plugins,s=void 0===a?[]:a,e.next=3,self.caches.open(n);case 3:return c=e.sent,e.next=6,N({plugins:s,request:r,mode:"read"});case 6:return l=e.sent,e.next=9,c.match(l,o);case 9:f=e.sent,h=u(s),e.prev=12,h.s();case 14:if((p=h.n()).done){e.next=24;break}if(!("cachedResponseWillBeUsed"in(d=p.value))){e.next=22;break}return v=d.cachedResponseWillBeUsed,e.next=20,v.call(d,{cacheName:n,event:i,matchOptions:o,cachedResponse:f,request:l});case 20:f=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:return e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),B={put:function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l,f,h,p,d,v,y,b;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.cacheName,r=t.request,i=t.response,o=t.event,a=t.plugins,s=void 0===a?[]:a,c=t.matchOptions,e.next=4;break;case 4:return e.next=6,N({plugins:s,request:r,mode:"write"});case 6:if(l=e.sent,i){e.next=10;break}throw new m("cache-put-with-no-response",{url:R(l.url)});case 10:return e.next=12,D({event:o,plugins:s,response:i,request:l});case 12:if(f=e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,self.caches.open(n);case 18:if(h=e.sent,!((p=j(s,"cacheDidUpdate")).length>0)){e.next=26;break}return e.next=23,U({cacheName:n,matchOptions:c,request:l});case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=null;case 27:return d=e.t0,e.prev=29,e.next=32,h.put(l,f);case 32:e.next=40;break;case 34:if(e.prev=34,e.t1=e.catch(29),"QuotaExceededError"!==e.t1.name){e.next=39;break}return e.next=39,I();case 39:throw e.t1;case 40:v=u(p),e.prev=41,v.s();case 43:if((y=v.n()).done){e.next=49;break}return b=y.value,e.next=47,b.cacheDidUpdate.call(b,{cacheName:n,event:o,oldResponse:d,newResponse:f,request:l});case 47:e.next=43;break;case 49:e.next=54;break;case 51:e.prev=51,e.t2=e.catch(41),v.e(e.t2);case 54:return e.prev=54,v.f(),e.finish(54);case 57:case"end":return e.stop()}}),e,null,[[29,34],[41,51,54,57]])})));return function(t){return e.apply(this,arguments)}}(),match:U};function L(){if(void 0===C){var e=new Response("");if("body"in e)try{new Response(e.body),C=!0}catch(t){C=!1}C=!1}return C}function K(e){e.then((function(){}))}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}var W=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.onupgradeneeded,u=i.onversionchange;a(this,e),this._db=null,this._name=t,this._version=n,this._onupgradeneeded=o,this._onversionchange=u||function(){return r.close()}}return q(e,[{key:"db",get:function(){return this._db}},{key:"open",value:function(){var e=O(A.a.mark((function e(){var t=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._db){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new Promise((function(e,n){var r=!1;setTimeout((function(){r=!0,n(new Error("The open request was blocked and timed out"))}),t.OPEN_TIMEOUT);var i=indexedDB.open(t._name,t._version);i.onerror=function(){return n(i.error)},i.onupgradeneeded=function(e){r?(i.transaction.abort(),i.result.close()):"function"===typeof t._onupgradeneeded&&t._onupgradeneeded(e)},i.onsuccess=function(){var n=i.result;r?n.close():(n.onversionchange=t._onversionchange.bind(t),e(n))}}));case 4:return this._db=e.sent,e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getKey",value:function(){var e=O(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllKeys(t,n,1);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=O(A.a.mark((function e(t,n,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllMatching(t,{query:n,count:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=O(A.a.mark((function e(t,n,r){var i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllMatching(t,{query:n,count:r,includeKeys:!0});case 2:return i=e.sent,e.abrupt("return",i.map((function(e){return e.key})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getAllMatching",value:function(){var e=O(A.a.mark((function e(t){var n,r,i,o,u,a,s,c,l,f=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=n.index,i=n.query,o=void 0===i?null:i,u=n.direction,a=void 0===u?"next":u,s=n.count,c=n.includeKeys,l=void 0!==c&&c,e.next=3,this.transaction([t],"readonly",(function(e,n){var i=e.objectStore(t),u=r?i.index(r):i,c=[],f=u.openCursor(o,a);f.onsuccess=function(){var e=f.result;e?(c.push(l?e:e.value),s&&c.length>=s?n(c):e.continue()):n(c)}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transaction",value:function(){var e=O(A.a.mark((function e(t,n,r){var i=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.open();case 2:return e.next=4,new Promise((function(e,o){var u=i._db.transaction(t,n);u.onabort=function(){return o(u.error)},u.oncomplete=function(){return e()},r(u,(function(t){return e(t)}))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_call",value:function(){var e=O(A.a.mark((function e(t,n,r){var i,o,u,a,s=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=s.length,o=new Array(i>3?i-3:0),u=3;u<i;u++)o[u-3]=s[u];return a=function(e,r){var i=e.objectStore(n),u=i[t].apply(i,o);u.onsuccess=function(){return r(u.result)}},e.next=4,this.transaction([n],r,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"close",value:function(){this._db&&(this._db.close(),this._db=null)}}]),e}();W.prototype.OPEN_TIMEOUT=2e3;for(var Y=function(){var e,t=M(H[V],2),n=t[0],r=u(t[1]);try{var i=function(){var t=e.value;t in IDBObjectStore.prototype&&(W.prototype[t]=function(){var e=O(A.a.mark((function e(r){var i,o,u,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=a.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=a[u];return e.next=3,this._call.apply(this,[t,r,n].concat(o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())};for(r.s();!(e=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}},V=0,H=Object.entries({readonly:["get","count","getKey","getAll","getAllKeys"],readwrite:["add","put","clear","delete"]});V<H.length;V++)Y();var $=function(){var e=O(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){var r=indexedDB.deleteDatabase(t);r.onerror=function(){n(r.error)},r.onblocked=function(){n(new Error("Delete blocked"))},r.onsuccess=function(){e()}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z={fetch:function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l,f,h,p,d,v,y,b,g,w,_,x,k,E;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.request,r=t.fetchOptions,i=t.event,o=t.plugins,a=void 0===o?[]:o,"string"===typeof n&&(n=new Request(n)),!(i instanceof FetchEvent&&i.preloadResponse)){e.next=9;break}return e.next=5,i.preloadResponse;case 5:if(!(s=e.sent)){e.next=9;break}return e.abrupt("return",s);case 9:0,c=j(a,"fetchDidFail"),l=c.length>0?n.clone():null,e.prev=12,f=u(a),e.prev=14,f.s();case 16:if((h=f.n()).done){e.next=27;break}if(!("requestWillFetch"in(p=h.value))){e.next=25;break}return d=p.requestWillFetch,v=n.clone(),e.next=23,d.call(p,{request:v,event:i});case 23:n=e.sent;case 25:e.next=16;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(14),f.e(e.t0);case 32:return e.prev=32,f.f(),e.finish(32);case 35:e.next=40;break;case 37:throw e.prev=37,e.t1=e.catch(12),new m("plugin-error-request-will-fetch",{thrownError:e.t1});case 40:if(y=n.clone(),e.prev=41,"navigate"!==n.mode){e.next=48;break}return e.next=45,fetch(n);case 45:b=e.sent,e.next=51;break;case 48:return e.next=50,fetch(n,r);case 50:b=e.sent;case 51:0,g=u(a),e.prev=53,g.s();case 55:if((w=g.n()).done){e.next=64;break}if(!("fetchDidSucceed"in(_=w.value))){e.next=62;break}return e.next=60,_.fetchDidSucceed.call(_,{event:i,request:y,response:b});case 60:b=e.sent;case 62:e.next=55;break;case 64:e.next=69;break;case 66:e.prev=66,e.t2=e.catch(53),g.e(e.t2);case 69:return e.prev=69,g.f(),e.finish(69);case 72:return e.abrupt("return",b);case 75:e.prev=75,e.t3=e.catch(41),x=u(c),e.prev=79,x.s();case 81:if((k=x.n()).done){e.next=87;break}return E=k.value,e.next=85,E.fetchDidFail.call(E,{error:e.t3,event:i,originalRequest:l.clone(),request:y.clone()});case 85:e.next=81;break;case 87:e.next=92;break;case 89:e.prev=89,e.t4=e.catch(79),x.e(e.t4);case 92:return e.prev=92,x.f(),e.finish(92);case 95:throw e.t3;case 96:case"end":return e.stop()}}),e,null,[[12,37],[14,29,32,35],[41,75],[53,66,69,72],[79,89,92,95]])})));return function(t){return e.apply(this,arguments)}}()};function G(e,t){return J.apply(this,arguments)}function J(){return(J=O(A.a.mark((function e(t,n){var r,i,o,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.clone(),i={headers:new Headers(r.headers),status:r.status,statusText:r.statusText},o=n?n(i):i,!L()){e.next=7;break}e.t0=r.body,e.next=10;break;case 7:return e.next=9,r.blob();case 9:e.t0=e.sent;case 10:return u=e.t0,e.abrupt("return",new Response(u,o));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(5);var Q="cache-entries",X=function(e){var t=new URL(e,location.href);return t.hash="",t.href},Z=function(){function e(t){var n=this;a(this,e),this._cacheName=t,this._db=new W("workbox-expiration",1,{onupgradeneeded:function(e){return n._handleUpgrade(e)}})}return q(e,[{key:"_handleUpgrade",value:function(e){var t=e.target.result.createObjectStore(Q,{keyPath:"id"});t.createIndex("cacheName","cacheName",{unique:!1}),t.createIndex("timestamp","timestamp",{unique:!1}),$(this._cacheName)}},{key:"setTimestamp",value:function(){var e=O(A.a.mark((function e(t,n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X(t),r={url:t,timestamp:n,cacheName:this._cacheName,id:this._getId(t)},e.next=4,this._db.put(Q,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTimestamp",value:function(){var e=O(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._db.get(Q,this._getId(t));case 2:return n=e.sent,e.abrupt("return",n.timestamp);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"expireEntries",value:function(){var e=O(A.a.mark((function e(t,n){var r,i,o,a,s,c=this;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._db.transaction(Q,"readwrite",(function(e,r){var i=e.objectStore(Q).index("timestamp").openCursor(null,"prev"),o=[],u=0;i.onsuccess=function(){var e=i.result;if(e){var a=e.value;a.cacheName===c._cacheName&&(t&&a.timestamp<t||n&&u>=n?o.push(e.value):u++),e.continue()}else r(o)}}));case 2:r=e.sent,i=[],o=u(r),e.prev=5,o.s();case 7:if((a=o.n()).done){e.next=14;break}return s=a.value,e.next=11,this._db.delete(Q,s.id);case 11:i.push(s.url);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:return e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this,[[5,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getId",value:function(e){return this._cacheName+"|"+X(e)}}]),e}(),ee=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this._isRunning=!1,this._rerunRequested=!1,this._maxEntries=n.maxEntries,this._maxAgeSeconds=n.maxAgeSeconds,this._cacheName=t,this._timestampModel=new Z(t)}return q(e,[{key:"expireEntries",value:function(){var e=O(A.a.mark((function e(){var t,n,r,i,o,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isRunning){e.next=3;break}return this._rerunRequested=!0,e.abrupt("return");case 3:return this._isRunning=!0,t=this._maxAgeSeconds?Date.now()-1e3*this._maxAgeSeconds:0,e.next=7,this._timestampModel.expireEntries(t,this._maxEntries);case 7:return n=e.sent,e.next=10,self.caches.open(this._cacheName);case 10:r=e.sent,i=u(n),e.prev=12,i.s();case 14:if((o=i.n()).done){e.next=20;break}return a=o.value,e.next=18,r.delete(a);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),i.e(e.t0);case 25:return e.prev=25,i.f(),e.finish(25);case 28:0,this._isRunning=!1,this._rerunRequested&&(this._rerunRequested=!1,K(this.expireEntries()));case 31:case"end":return e.stop()}}),e,this,[[12,22,25,28]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateTimestamp",value:function(){var e=O(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this._timestampModel.setTimestamp(t,Date.now());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isURLExpired",value:function(){var e=O(A.a.mark((function e(t){var n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._maxAgeSeconds){e.next=6;break}e.next=3;break;case 3:return e.abrupt("return",!1);case 6:return e.next=8,this._timestampModel.getTimestamp(t);case 8:return n=e.sent,r=Date.now()-1e3*this._maxAgeSeconds,e.abrupt("return",n<r);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=O(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._rerunRequested=!1,e.next=3,this._timestampModel.expireEntries(1/0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),te=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.cachedResponseWillBeUsed=function(){var e=O(A.a.mark((function e(n){var r,i,o,u,a,s,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.event,i=n.request,o=n.cacheName,u=n.cachedResponse){e.next=3;break}return e.abrupt("return",null);case 3:if(a=t._isResponseDateFresh(u),K((s=t._getCacheExpiration(o)).expireEntries()),c=s.updateTimestamp(i.url),r)try{r.waitUntil(c)}catch(l){0}return e.abrupt("return",a?u:null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.cacheDidUpdate=function(){var e=O(A.a.mark((function e(n){var r,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.cacheName,i=n.request,o=t._getCacheExpiration(r),e.next=5,o.updateTimestamp(i.url);case 5:return e.next=7,o.expireEntries();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._config=n,this._maxAgeSeconds=n.maxAgeSeconds,this._cacheExpirations=new Map,n.purgeOnQuotaError&&w((function(){return t.deleteCacheAndMetadata()}))}return q(e,[{key:"_getCacheExpiration",value:function(e){if(e===E())throw new m("expire-custom-caches-only");var t=this._cacheExpirations.get(e);return t||(t=new ee(e,this._config),this._cacheExpirations.set(e,t)),t}},{key:"_isResponseDateFresh",value:function(e){if(!this._maxAgeSeconds)return!0;var t=this._getDateHeaderTimestamp(e);return null===t||t>=Date.now()-1e3*this._maxAgeSeconds}},{key:"_getDateHeaderTimestamp",value:function(e){if(!e.headers.has("date"))return null;var t=e.headers.get("date"),n=new Date(t).getTime();return isNaN(n)?null:n}},{key:"deleteCacheAndMetadata",value:function(){var e=O(A.a.mark((function e(){var t,n,r,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u(this._cacheExpirations),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}return r=M(n.value,2),i=r[0],o=r[1],e.next=7,self.caches.delete(i);case 7:return e.next=9,o.delete();case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:this._cacheExpirations=new Map;case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ne=(n(2),[]),re=function(){return ne};function ie(e){if(!e)throw new m("add-to-cache-list-unexpected-type",{entry:e});if("string"===typeof e){var t=new URL(e,location.href);return{cacheKey:t.href,url:t.href}}var n=e.revision,r=e.url;if(!r)throw new m("add-to-cache-list-unexpected-type",{entry:e});if(!n){var i=new URL(r,location.href);return{cacheKey:i.href,url:i.href}}var o=new URL(r,location.href),u=new URL(r,location.href);return o.searchParams.set("__WB_REVISION__",n),{cacheKey:o.href,url:u.href}}var oe,ue=function(){function e(t){a(this,e),this._cacheName=k(t),this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map}return q(e,[{key:"addToCacheList",value:function(e){var t,n=[],r=u(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;"string"===typeof i?n.push(i):i&&void 0===i.revision&&n.push(i.url);var o=ie(i),a=o.cacheKey,s=o.url,c="string"!==typeof i&&i.revision?"reload":"default";if(this._urlsToCacheKeys.has(s)&&this._urlsToCacheKeys.get(s)!==a)throw new m("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(s),secondEntry:a});if("string"!==typeof i&&i.integrity){if(this._cacheKeysToIntegrities.has(a)&&this._cacheKeysToIntegrities.get(a)!==i.integrity)throw new m("add-to-cache-list-conflicting-integrities",{url:s});this._cacheKeysToIntegrities.set(a,i.integrity)}if(this._urlsToCacheKeys.set(s,a),this._urlsToCacheModes.set(s,c),n.length>0){var l="Workbox is precaching URLs without revision "+"info: ".concat(n.join(", "),"\nThis is generally NOT safe. ")+"Learn more at https://bit.ly/wb-precache";console.warn(l)}}}catch(f){r.e(f)}finally{r.f()}}},{key:"install",value:function(){var e=O(A.a.mark((function e(){var t,n,r,i,o,a,s,c,l,f,h,p,d,v,y,b=this,m=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},n=t.event,r=t.plugins,i=[],o=[],e.next=6,self.caches.open(this._cacheName);case 6:return a=e.sent,e.next=9,a.keys();case 9:s=e.sent,c=new Set(s.map((function(e){return e.url}))),l=u(this._urlsToCacheKeys);try{for(l.s();!(f=l.n()).done;)h=M(f.value,2),p=h[0],d=h[1],c.has(d)?o.push(p):i.push({cacheKey:d,url:p})}catch(g){l.e(g)}finally{l.f()}return v=i.map((function(e){var t=e.cacheKey,i=e.url,o=b._cacheKeysToIntegrities.get(t),u=b._urlsToCacheModes.get(i);return b._addURLToCache({cacheKey:t,cacheMode:u,event:n,integrity:o,plugins:r,url:i})})),e.next=16,Promise.all(v);case 16:return y=i.map((function(e){return e.url})),e.abrupt("return",{updatedURLs:y,notUpdatedURLs:o});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"activate",value:function(){var e=O(A.a.mark((function e(){var t,n,r,i,o,a,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,self.caches.open(this._cacheName);case 2:return t=e.sent,e.next=5,t.keys();case 5:n=e.sent,r=new Set(this._urlsToCacheKeys.values()),i=[],o=u(n),e.prev=9,o.s();case 11:if((a=o.n()).done){e.next=19;break}if(s=a.value,r.has(s.url)){e.next=17;break}return e.next=16,t.delete(s);case 16:i.push(s.url);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return e.abrupt("return",{deletedURLs:i});case 29:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"_addURLToCache",value:function(){var e=O(A.a.mark((function e(t){var n,r,i,o,a,s,c,l,f,h,p,d;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cacheKey,r=t.url,i=t.cacheMode,o=t.event,a=t.plugins,s=t.integrity,c=new Request(r,{integrity:s,cache:i,credentials:"same-origin"}),e.next=4,z.fetch({event:o,plugins:a,request:c});case 4:l=e.sent,h=u(a||[]);try{for(h.s();!(p=h.n()).done;)"cacheWillUpdate"in(d=p.value)&&(f=d)}catch(v){h.e(v)}finally{h.f()}if(!f){e.next=13;break}return e.next=10,f.cacheWillUpdate({event:o,request:c,response:l});case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=l.status<400;case 14:if(e.t0){e.next=17;break}throw new m("bad-precaching-response",{url:r,status:l.status});case 17:if(!l.redirected){e.next=21;break}return e.next=20,G(l);case 20:l=e.sent;case 21:return e.next=23,B.put({event:o,plugins:a,response:l,request:n===r?c:new Request(n),cacheName:this._cacheName,matchOptions:{ignoreSearch:!0}});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getURLsToCacheKeys",value:function(){return this._urlsToCacheKeys}},{key:"getCachedURLs",value:function(){return o(this._urlsToCacheKeys.keys())}},{key:"getCacheKeyForURL",value:function(e){var t=new URL(e,location.href);return this._urlsToCacheKeys.get(t.href)}},{key:"matchPrecache",value:function(){var e=O(A.a.mark((function e(t){var n,r,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t instanceof Request?t.url:t,!(r=this.getCacheKeyForURL(n))){e.next=7;break}return e.next=5,self.caches.open(this._cacheName);case 5:return i=e.sent,e.abrupt("return",i.match(r));case 7:return e.abrupt("return",void 0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createHandler",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(){var n=O(A.a.mark((function n(r){var i,o;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.request,n.prev=1,n.next=4,e.matchPrecache(i);case 4:if(!(o=n.sent)){n.next=7;break}return n.abrupt("return",o);case 7:throw new m("missing-precache-entry",{cacheName:e._cacheName,url:i instanceof Request?i.url:i});case 10:if(n.prev=10,n.t0=n.catch(1),!t){n.next=15;break}return n.abrupt("return",fetch(i));case 15:throw n.t0;case 16:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}},{key:"createHandlerBoundToURL",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getCacheKeyForURL(e);if(!n)throw new m("non-precached-url",{url:e});var r=this.createHandler(t),i=new Request(e);return function(){return r({request:i})}}}]),e}(),ae=function(){return oe||(oe=new ue),oe};function se(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=function(){var n=i[r];t.some((function(e){return e.test(n)}))&&e.searchParams.delete(n)},r=0,i=o(e.searchParams.keys());r<i.length;r++)n();return e}var ce=A.a.mark(le);function le(e){var t,n,r,i,o,a,s,c,l,f,h,p,d,v=arguments;return A.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:return t=v.length>1&&void 0!==v[1]?v[1]:{},n=t.ignoreURLParametersMatching,r=t.directoryIndex,i=t.cleanURLs,o=t.urlManipulation,(a=new URL(e,location.href)).hash="",y.next=5,a.href;case 5:return s=se(a,n),y.next=8,s.href;case 8:if(!r||!s.pathname.endsWith("/")){y.next=13;break}return(c=new URL(s.href)).pathname+=r,y.next=13,c.href;case 13:if(!i){y.next=18;break}return(l=new URL(s.href)).pathname+=".html",y.next=18,l.href;case 18:if(!o){y.next=37;break}f=o({url:a}),h=u(f),y.prev=21,h.s();case 23:if((p=h.n()).done){y.next=29;break}return d=p.value,y.next=27,d.href;case 27:y.next=23;break;case 29:y.next=34;break;case 31:y.prev=31,y.t0=y.catch(21),h.e(y.t0);case 34:return y.prev=34,h.f(),y.finish(34);case 37:case"end":return y.stop()}}),ce,null,[[21,31,34,37]])}var fe=function(e,t){var n,r=ae().getURLsToCacheKeys(),i=u(le(e,t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=r.get(o);if(a)return a}}catch(s){i.e(s)}finally{i.f()}},he=!1;function pe(e){he||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignoreURLParametersMatching,n=void 0===t?[/^utm_/]:t,r=e.directoryIndex,i=void 0===r?"index.html":r,o=e.cleanURLs,u=void 0===o||o,a=e.urlManipulation,s=k();self.addEventListener("fetch",(function(e){var t=fe(e.request.url,{cleanURLs:u,directoryIndex:i,ignoreURLParametersMatching:n,urlManipulation:a});if(t){var r=self.caches.open(s).then((function(e){return e.match(t)})).then((function(e){return e||fetch(t)}));e.respondWith(r)}}))}(e),he=!0)}var de=function(e){var t=ae(),n=re();e.waitUntil(t.install({event:e,plugins:n}).catch((function(e){throw e})))},ve=function(e){var t=ae();e.waitUntil(t.activate())};n(3);var ye,be=function(e){return e&&"object"===typeof e?e:{handle:e}},me=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";a(this,e),this.handler=be(n),this.match=t,this.method=r},ge=function(e){c(n,e);var t=d(n);function n(e,r,i){a(this,n);return t.call(this,(function(t){var n=t.url,r=e.exec(n.href);if(r&&(n.origin===location.origin||0===r.index))return r.slice(1)}),r,i)}return n}(me),we=function(){function e(){a(this,e),this._routes=new Map}return q(e,[{key:"routes",get:function(){return this._routes}},{key:"addFetchListener",value:function(){var e=this;self.addEventListener("fetch",(function(t){var n=t.request,r=e.handleRequest({request:n,event:t});r&&t.respondWith(r)}))}},{key:"addCacheListener",value:function(){var e=this;self.addEventListener("message",(function(t){if(t.data&&"CACHE_URLS"===t.data.type){var n=t.data.payload;0;var r=Promise.all(n.urlsToCache.map((function(t){"string"===typeof t&&(t=[t]);var n=v(Request,o(t));return e.handleRequest({request:n})})));t.waitUntil(r),t.ports&&t.ports[0]&&r.then((function(){return t.ports[0].postMessage(!0)}))}}))}},{key:"handleRequest",value:function(e){var t=this,n=e.request,r=e.event;var i=new URL(n.url,location.href);if(i.protocol.startsWith("http")){var o=this.findMatchingRoute({url:i,request:n,event:r}),u=o.params,a=o.route,s=a&&a.handler;if(!s&&this._defaultHandler&&(s=this._defaultHandler),s){var c;0;try{c=s.handle({url:i,request:n,event:r,params:u})}catch(l){c=Promise.reject(l)}return c instanceof Promise&&this._catchHandler&&(c=c.catch((function(e){return t._catchHandler.handle({url:i,request:n,event:r})}))),c}}}},{key:"findMatchingRoute",value:function(e){var t=e.url,n=e.request,r=e.event;var i,o=u(this._routes.get(n.method)||[]);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=void 0,c=a.match({url:t,request:n,event:r});if(c)return s=c,(Array.isArray(c)&&0===c.length||c.constructor===Object&&0===Object.keys(c).length||"boolean"===typeof c)&&(s=void 0),{route:a,params:s}}}catch(l){o.e(l)}finally{o.f()}return{}}},{key:"setDefaultHandler",value:function(e){this._defaultHandler=be(e)}},{key:"setCatchHandler",value:function(e){this._catchHandler=be(e)}},{key:"registerRoute",value:function(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}},{key:"unregisterRoute",value:function(e){if(!this._routes.has(e.method))throw new m("unregister-route-but-not-found-with-method",{method:e.method});var t=this._routes.get(e.method).indexOf(e);if(!(t>-1))throw new m("unregister-route-route-not-registered");this._routes.get(e.method).splice(t,1)}}]),e}(),_e=function(){return ye||((ye=new we).addFetchListener(),ye.addCacheListener()),ye};function xe(e,t,n){var r;if("string"===typeof e){var i=new URL(e,location.href);r=new me((function(e){return e.url.href===i.href}),t,n)}else if(e instanceof RegExp)r=new ge(e,t,n);else if("function"===typeof e)r=new me(e,t,n);else{if(!(e instanceof me))throw new m("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});r=e}return _e().registerRoute(r),r}n(4);var ke,Ee={cacheWillUpdate:function(){var e=O(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==(n=t.response).status&&0!==n.status){e.next=3;break}return e.abrupt("return",n);case 3:return e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Se=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a(this,e),this._cacheName=E(t.cacheName),this._plugins=t.plugins||[],t.plugins){var n=t.plugins.some((function(e){return!!e.cacheWillUpdate}));this._plugins=n?t.plugins:[Ee].concat(o(t.plugins))}else this._plugins=[Ee];this._fetchOptions=t.fetchOptions,this._matchOptions=t.matchOptions}return q(e,[{key:"handle",value:function(){var e=O(A.a.mark((function e(t){var n,r,i,o,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.event,r=t.request,[],"string"===typeof r&&(r=new Request(r)),i=this._getFromNetwork({request:r,event:n}),e.next=7,B.match({cacheName:this._cacheName,request:r,event:n,matchOptions:this._matchOptions,plugins:this._plugins});case 7:if(!(o=e.sent)){e.next=13;break}if(n)try{n.waitUntil(i)}catch(u){0}e.next=23;break;case 13:return e.prev=14,e.next=17,i;case 17:o=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),u=e.t0;case 23:if(o){e.next=26;break}throw new m("no-response",{url:r.url,error:u});case 26:return e.abrupt("return",o);case 27:case"end":return e.stop()}}),e,this,[[14,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFromNetwork",value:function(){var e=O(A.a.mark((function e(t){var n,r,i,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.request,r=t.event,e.next=3,z.fetch({request:n,event:r,fetchOptions:this._fetchOptions,plugins:this._plugins});case 3:if(i=e.sent,o=B.put({cacheName:this._cacheName,request:n,response:i.clone(),event:r,plugins:this._plugins}),r)try{r.waitUntil(o)}catch(u){0}return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();console.debug("Service worker build on",new Date(parseInt("1626018637000"))),self.addEventListener("activate",(function(){return self.clients.claim()})),function(e){ae().addToCacheList(e),e.length>0&&(self.addEventListener("install",de),self.addEventListener("activate",ve))}([{'revision':'534fb570d3dea67fbc6eef268d321626','url':'./index.html'},{'revision':null,'url':'./static/css/2.150d169a.chunk.css'},{'revision':null,'url':'./static/css/main.5ffdc11a.chunk.css'},{'revision':null,'url':'./static/js/2.f3157be1.chunk.js'},{'revision':null,'url':'./static/js/3.de9e4884.chunk.js'},{'revision':null,'url':'./static/js/main.8d07c165.chunk.js'},{'revision':null,'url':'./static/js/runtime-main.d7b5d4c5.js'}]),pe(ke);var Ae,Te=new RegExp("/[^/?]+\\.[^/]+$");xe((function(e){var t=e.request,n=e.url;return"navigate"===t.mode&&(!n.pathname.startsWith("/_")&&!n.pathname.match(Te))}),(Ae="./index.html",ae().createHandlerBoundToURL(Ae))),xe((function(e){var t=e.url;return t.origin===self.location.origin&&t.pathname.endsWith(".png")}),new Se({cacheName:"images",plugins:[new te({maxEntries:50})]})),self.addEventListener("message",(function(e){e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Observable",(function(){return k})),n.d(t,"ConnectableObservable",(function(){return R})),n.d(t,"GroupedObservable",(function(){return N})),n.d(t,"observable",(function(){return g})),n.d(t,"Subject",(function(){return O})),n.d(t,"BehaviorSubject",(function(){return U})),n.d(t,"ReplaySubject",(function(){return ne})),n.d(t,"AsyncSubject",(function(){return ie})),n.d(t,"asap",(function(){return pe})),n.d(t,"asapScheduler",(function(){return he})),n.d(t,"async",(function(){return ve})),n.d(t,"asyncScheduler",(function(){return de})),n.d(t,"queue",(function(){return q})),n.d(t,"queueScheduler",(function(){return F})),n.d(t,"animationFrame",(function(){return me})),n.d(t,"animationFrameScheduler",(function(){return be})),n.d(t,"VirtualTimeScheduler",(function(){return ge})),n.d(t,"VirtualAction",(function(){return we})),n.d(t,"Scheduler",(function(){return K})),n.d(t,"Subscription",(function(){return p})),n.d(t,"Subscriber",(function(){return y})),n.d(t,"Notification",(function(){return Z})),n.d(t,"NotificationKind",(function(){return H})),n.d(t,"pipe",(function(){return _})),n.d(t,"noop",(function(){return _e})),n.d(t,"identity",(function(){return w})),n.d(t,"isObservable",(function(){return xe})),n.d(t,"ArgumentOutOfRangeError",(function(){return ke})),n.d(t,"EmptyError",(function(){return Ee})),n.d(t,"ObjectUnsubscribedError",(function(){return S})),n.d(t,"UnsubscriptionError",(function(){return h})),n.d(t,"TimeoutError",(function(){return Se})),n.d(t,"bindCallback",(function(){return Ie})),n.d(t,"bindNodeCallback",(function(){return Re})),n.d(t,"combineLatest",(function(){return Ve})),n.d(t,"concat",(function(){return it})),n.d(t,"defer",(function(){return ot})),n.d(t,"empty",(function(){return Y})),n.d(t,"forkJoin",(function(){return ut})),n.d(t,"from",(function(){return Ge})),n.d(t,"fromEvent",(function(){return st})),n.d(t,"fromEventPattern",(function(){return lt})),n.d(t,"generate",(function(){return ft})),n.d(t,"iif",(function(){return pt})),n.d(t,"interval",(function(){return vt})),n.d(t,"merge",(function(){return bt})),n.d(t,"never",(function(){return gt})),n.d(t,"of",(function(){return J})),n.d(t,"onErrorResumeNext",(function(){return wt})),n.d(t,"pairs",(function(){return _t})),n.d(t,"partition",(function(){return Tt})),n.d(t,"race",(function(){return Ot})),n.d(t,"range",(function(){return Ct})),n.d(t,"throwError",(function(){return Q})),n.d(t,"timer",(function(){return jt})),n.d(t,"using",(function(){return Dt})),n.d(t,"zip",(function(){return Ut})),n.d(t,"scheduled",(function(){return ze})),n.d(t,"EMPTY",(function(){return W})),n.d(t,"NEVER",(function(){return mt})),n.d(t,"config",(function(){return a}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){return"function"===typeof e}var u=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;u=e},get useDeprecatedSynchronousErrorHandling(){return u}};function s(e){setTimeout((function(){throw e}),0)}var c={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;s(e)},complete:function(){}},l=function(){return Array.isArray||function(e){return e&&"number"===typeof e.length}}();function f(e){return null!==e&&"object"===typeof e}var h=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),p=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,u=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(o(u)){i&&(this._unsubscribe=void 0);try{u.call(this)}catch(v){t=v instanceof h?d(v.errors):[v]}}if(l(a)){s=-1;for(var c=a.length;++s<c;){var p=a[s];if(f(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof h?t=t.concat(d(v.errors)):t.push(v)}}}if(t)throw new h(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!==typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function d(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var v=function(){return"function"===typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),y=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=c;break;case 1:if(!n){o.destination=c;break}if("object"===typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new b(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new b(o,n,r,i)}return o}return i(t,e),t.prototype[v]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(p),b=function(e){function t(t,n,r,i){var u,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return o(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==c&&(o((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=u,a._error=r,a._complete=i,a}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):s(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;s(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw n;s(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(s(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(y);function m(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof y?r:null}return!0}var g=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function w(e){return e}function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x(e)}function x(e){return 0===e.length?w:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var k=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof y)return e;if(e[v])return e[v]()}return e||t||n?new y(e,t,n):new y(c)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),m(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=E(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[g]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:x(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=E(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function E(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var S=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),A=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(p),T=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(y),O=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[v]=function(){return new T(this)},t.prototype.lift=function(e){var t=new I(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new S;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new S;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new S;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new S;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new S;return this.hasError?(e.error(this.thrownError),p.EMPTY):this.isStopped?(e.complete(),p.EMPTY):(this.observers.push(e),new A(this,e))},t.prototype.asObservable=function(){var e=new k;return e.source=this,e},t.create=function(e,t){return new I(e,t)},t}(k),I=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):p.EMPTY},t}(O);var P=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new C(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),C=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(y),R=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new p).add(this.source.subscribe(new j(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new P(e));var e},t}(k),j=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(T);var N=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return i(t,e),t.prototype._subscribe=function(e){var t=new p,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new D(n)),t.add(r.subscribe(e)),t},t}(k),D=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(p),U=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(O),B=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(p)),L=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(B),K=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),M=function(e){function t(n,r){void 0===r&&(r=K.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(K),F=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(M))(L),q=F,W=new k((function(e){return e.complete()}));function Y(e){return e?function(e){return new k((function(t){return e.schedule((function(){return t.complete()}))}))}(e):W}function V(e){return e&&"function"===typeof e.schedule}var H,$=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function z(e,t){return new k((function(n){var r=new p,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function G(e,t){return t?z(e,t):new k($(e))}function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return V(n)?(e.pop(),z(e,n)):G(e)}function Q(e,t){return new k(t?function(n){return t.schedule(X,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function X(e){var t=e.error;e.subscriber.error(t)}H||(H={});var Z=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"===typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return Q(this.error);case"C":return Y()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!==typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var ee=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new te(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Z.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Z.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Z.createComplete()),this.unsubscribe()},t}(y),te=function(){return function(e,t){this.notification=e,this.destination=t}}(),ne=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new re(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new S;if(this.isStopped||this.hasError?t=p.EMPTY:(this.observers.push(e),t=new A(this,e)),i&&e.add(e=new ee(e,i)),n)for(var u=0;u<o&&!e.closed;u++)e.next(r[u]);else for(u=0;u<o&&!e.closed;u++)e.next(r[u].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||q).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(O),re=function(){return function(e,t){this.time=e,this.value=t}}(),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),p.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),p.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(O),oe=1,ue=function(){return Promise.resolve()}(),ae={};function se(e){return e in ae&&(delete ae[e],!0)}var ce=function(e){var t=oe++;return ae[t]=!0,ue.then((function(){return se(t)&&e()})),t},le=function(e){se(e)},fe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=ce(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(le(n),t.scheduled=void 0)},t}(B),he=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(M))(fe),pe=he,de=new M(B),ve=de,ye=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(B),be=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(M))(ye),me=be,ge=function(e){function t(t,n){void 0===t&&(t=we),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(M),we=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(B);function _e(){}function xe(e){return!!e&&(e instanceof k||"function"===typeof e.lift&&"function"===typeof e.subscribe)}var ke=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Ee=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Se=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function Ae(e,t){return function(n){if("function"!==typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Te(e,t))}}var Te=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Oe(e,this.project,this.thisArg))},e}(),Oe=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(y);function Ie(e,t,n){if(t){if(!V(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ie(e,n).apply(void 0,r).pipe(Ae((function(e){return l(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,u={context:o,subject:i,callbackFunc:e,scheduler:n};return new k((function(r){if(n){var a={args:t,subscriber:r,params:u};return n.schedule(Pe,0,a)}if(!i){i=new ie;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(s){m(i)?i.error(s):console.warn(s)}}return i.subscribe(r)}))}}function Pe(e){var t=this,n=e.args,r=e.subscriber,i=e.params,o=i.callbackFunc,u=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new ie;try{o.apply(u,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(a.schedule(Ce,0,{value:r,subject:s}))}]))}catch(c){s.error(c)}}this.add(s.subscribe(r))}function Ce(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Re(e,t,n){if(t){if(!V(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Re(e,n).apply(void 0,r).pipe(Ae((function(e){return l(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new k((function(r){var o=i.context,u=i.subject;if(n)return n.schedule(je,0,{params:i,subscriber:r,context:o});if(!u){u=i.subject=new ie;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?u.error(n):(u.next(e.length<=1?e[0]:e),u.complete())}]))}catch(a){m(u)?u.error(a):console.warn(a)}}return u.subscribe(r)}))}}function je(e){var t=this,n=e.params,r=e.subscriber,i=e.context,o=n.callbackFunc,u=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new ie;try{o.apply(i,u.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(a.schedule(De,0,{err:r,subject:s}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(Ne,0,{value:i,subject:s}))}}]))}catch(c){this.add(a.schedule(De,0,{err:c,subject:s}))}}this.add(s.subscribe(r))}function Ne(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function De(e){var t=e.err;e.subject.error(t)}var Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(y),Be=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(y);function Le(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ke=Le(),Me=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function Fe(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then}var qe=function(e){if(e&&"function"===typeof e[g])return r=e,function(e){var t=r[g]();if("function"!==typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Me(e))return $(e);if(Fe(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,s),e};if(e&&"function"===typeof e[Ke])return t=e,function(e){for(var n=t[Ke]();;){var r=void 0;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"===typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=f(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function We(e,t,n,r,i){if(void 0===i&&(i=new Be(e,n,r)),!i.closed)return t instanceof k?t.subscribe(i):qe(t)(i)}var Ye={};function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return V(e[e.length-1])&&(r=e.pop()),"function"===typeof e[e.length-1]&&(n=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),G(e,r).lift(new He(n))}var He=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new $e(e,this.resultSelector))},e}(),$e=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(t,e),t.prototype._next=function(e){this.values.push(Ye),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(We(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],o=this.toRespond?i===Ye?--this.toRespond:this.toRespond:0;r[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Ue);function ze(e,t){if(null!=e){if(function(e){return e&&"function"===typeof e[g]}(e))return function(e,t){return new k((function(n){var r=new p;return r.add(t.schedule((function(){var i=e[g]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Fe(e))return function(e,t){return new k((function(n){var r=new p;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Me(e))return z(e,t);if(function(e){return e&&"function"===typeof e[Ke]}(e)||"string"===typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new k((function(n){var r,i=new p;return i.add((function(){r&&"function"===typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Ke](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Ge(e,t){return t?ze(e,t):e instanceof k?e:new k(qe(e))}var Je=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(y),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(y);function Xe(e,t){if(!t.closed)return e instanceof k?e.subscribe(t):qe(e)(t)}function Ze(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"===typeof t?function(r){return r.pipe(Ze((function(n,r){return Ge(e(n,r)).pipe(Ae((function(e,i){return t(n,e,r,i)})))}),n))}:("number"===typeof t&&(n=t),function(t){return t.lift(new et(e,n))})}var et=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new tt(e,this.project,this.concurrent))},e}(),tt=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Je(this),n=this.destination;n.add(t);var r=Xe(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Qe);function nt(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ze(w,e)}function rt(){return nt(1)}function it(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rt()(J.apply(void 0,e))}function ot(e){return new k((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Ge(n):Y()).subscribe(t)}))}function ut(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(l(n))return at(n,null);if(f(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return at(r.map((function(e){return n[e]})),r)}}if("function"===typeof e[e.length-1]){var i=e.pop();return at(e=1===e.length&&l(e[0])?e[0]:e,null).pipe(Ae((function(e){return i.apply(void 0,e)})))}return at(e,null)}function at(e,t){return new k((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,u=0,a=function(a){var s=Ge(e[a]),c=!1;n.add(s.subscribe({next:function(e){c||(c=!0,u++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&c||(u===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},s=0;s<r;s++)a(s);else n.complete()}))}function st(e,t,n,r){return o(n)&&(r=n,n=void 0),r?st(e,t,n).pipe(Ae((function(e){return l(e)?r.apply(void 0,e):r(e)}))):new k((function(r){ct(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function ct(e,t,n,r,i){var o;if(function(e){return e&&"function"===typeof e.addEventListener&&"function"===typeof e.removeEventListener}(e)){var u=e;e.addEventListener(t,n,i),o=function(){return u.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"===typeof e.on&&"function"===typeof e.off}(e)){var a=e;e.on(t,n),o=function(){return a.off(t,n)}}else if(function(e){return e&&"function"===typeof e.addListener&&"function"===typeof e.removeListener}(e)){var s=e;e.addListener(t,n),o=function(){return s.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)ct(e[c],t,n,r,i)}r.add(o)}function lt(e,t,n){return n?lt(e,t).pipe(Ae((function(e){return l(e)?n.apply(void 0,e):n(e)}))):new k((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(u){return void n.error(u)}if(o(t))return function(){return t(i,r)}}))}function ft(e,t,n,r,i){var o,u;if(1==arguments.length){var a=e;u=a.initialState,t=a.condition,n=a.iterate,o=a.resultSelector||w,i=a.scheduler}else void 0===r||V(r)?(u=e,o=w,i=r):(u=e,o=r);return new k((function(e){var r=u;if(i)return i.schedule(ht,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:r});for(;;){if(t){var a=void 0;try{a=t(r)}catch(c){return void e.error(c)}if(!a){e.complete();break}}var s=void 0;try{s=o(r)}catch(c){return void e.error(c)}if(e.next(s),e.closed)break;try{r=n(r)}catch(c){return void e.error(c)}}}))}function ht(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(o){return void t.error(o)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(o){return void t.error(o)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(o){return void t.error(o)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function pt(e,t,n){return void 0===t&&(t=W),void 0===n&&(n=W),ot((function(){return e()?t:n}))}function dt(e){return!l(e)&&e-parseFloat(e)+1>=0}function vt(e,t){return void 0===e&&(e=0),void 0===t&&(t=ve),(!dt(e)||e<0)&&(e=0),t&&"function"===typeof t.schedule||(t=ve),new k((function(n){return n.add(t.schedule(yt,e,{subscriber:n,counter:0,period:e})),n}))}function yt(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return V(i)?(r=e.pop(),e.length>1&&"number"===typeof e[e.length-1]&&(n=e.pop())):"number"===typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof k?e[0]:nt(n)(G(e,r))}var mt=new k(_e);function gt(){return mt}function wt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return W;var n=e[0],r=e.slice(1);return 1===e.length&&l(n)?wt.apply(void 0,n):new k((function(e){var t=function(){return e.add(wt.apply(void 0,r).subscribe(e))};return Ge(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function _t(e,t){return new k(t?function(n){var r=Object.keys(e),i=new p;return i.add(t.schedule(xt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function xt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,o=e.obj;if(!r.closed)if(n<t.length){var u=t[n];r.next([u,o[u]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function kt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function Et(e,t){return function(n){return n.lift(new St(e,t))}}var St=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new At(e,this.predicate,this.thisArg))},e}(),At=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(y);function Tt(e,t,n){return[Et(t,n)(new k(qe(e))),Et(kt(t,n))(new k(qe(e)))]}function Ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!l(e[0]))return e[0];e=e[0]}return G(e,void 0).lift(new It)}var It=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Pt(e))},e}(),Pt=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=We(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(Ue);function Ct(e,t,n){return void 0===e&&(e=0),new k((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(Rt,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))}function Rt(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function jt(e,t,n){void 0===e&&(e=0);var r=-1;return dt(t)?r=Number(t)<1?1:Number(t):V(t)&&(n=t),V(n)||(n=ve),new k((function(t){var i=dt(e)?e:+e-n.now();return n.schedule(Nt,i,{index:0,period:r,subscriber:t})}))}function Nt(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Dt(e,t){return new k((function(n){var r,i;try{r=e()}catch(u){return void n.error(u)}try{i=t(r)}catch(u){return void n.error(u)}var o=(i?Ge(i):W).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}function Ut(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"===typeof n&&e.pop(),G(e,void 0).lift(new Bt(n))}var Bt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Lt(e,this.resultSelector))},e}(),Lt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"===typeof n?n:void 0,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;l(e)?t.push(new Mt(e)):"function"===typeof e[Ke]?t.push(new Kt(e[Ke]())):t.push(new Ft(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"===typeof(u=e[r]).hasValue&&!u.hasValue())return}var i=!1,o=[];for(r=0;r<t;r++){var u,a=(u=e[r]).next();if(u.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(y),Kt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),Mt=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ke]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Ft=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[Ke]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Xe(this.observable,new Je(this))},t}(Qe)}]);
//# sourceMappingURL=service-worker.js.map